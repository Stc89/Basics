A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN .\Objects\task_switch.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE .\Objects\task_switch.src PR(.\Listings\task_switch.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\task_switch.SRC generated from: task_switch.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil\C51\BIN\C51.EXE task_switch.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\t
                             ask_switch.lst) SRC(.\Objects\task_switch.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    TASK_SWITCH
                       8     
  0093                 9     P0M1    DATA    093H
  0092                10     P1M0    DATA    092H
  0096                11     P2M0    DATA    096H
  0091                12     P1M1    DATA    091H
  0080                13     P0      DATA    080H
  00B2                14     P3M0    DATA    0B2H
  0095                15     P2M1    DATA    095H
  0090                16     P1      DATA    090H
  00B4                17     P4M0    DATA    0B4H
  00B1                18     P3M1    DATA    0B1H
  00A0                19     P2      DATA    0A0H
  00CA                20     P5M0    DATA    0CAH
  00B3                21     P4M1    DATA    0B3H
  00B0                22     P3      DATA    0B0H
  00AB                23     WKTCH   DATA    0ABH
  00D6                24     AC      BIT     0D0H.6
  00CC                25     P6M0    DATA    0CCH
  00C9                26     P5M1    DATA    0C9H
  00C0                27     P4      DATA    0C0H
  00E2                28     P7M0    DATA    0E2H
  00CB                29     P6M1    DATA    0CBH
  00C8                30     P5      DATA    0C8H
  00E8                31     P6      DATA    0E8H
  00E1                32     P7M1    DATA    0E1H
  00AF                33     EA      BIT     0A8H.7
  00F8                34     P7      DATA    0F8H
  00AA                35     WKTCL   DATA    0AAH
  00CE                36     SPCTL   DATA    0CEH
  00A2                37     P_SW1   DATA    0A2H
  00BA                38     P_SW2   DATA    0BAH
  00E5                39     DPH1    DATA    0E5H
  00AD                40     EADC    BIT     0A8H.5
  00A8                41     IE      DATA    0A8H
  00C5                42     IAP_CMD DATA    0C5H
  00E4                43     DPL1    DATA    0E4H
  00BD                44     ADC_RES DATA    0BDH
  00B6                45     IP2H    DATA    0B6H
  00EE                46     IP3H    DATA    0EEH
  00AE                47     TA      DATA    0AEH
  008F                48     INTCLKO DATA    08FH
  00AC                49     ES      BIT     0A8H.4
  00BD                50     PADC    BIT     0B8H.5
  00B8                51     IP      DATA    0B8H
  00DE                52     ADCCFG  DATA    0DEH
  0098                53     RI      BIT     098H.0
  00D7                54     CY      BIT     0D0H.7
  0099                55     TI      BIT     098H.1
  00C3                56     IAP_ADDRH       DATA    0C3H
  00BC                57     PS      BIT     0B8H.4
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     2

  0081                58     SP      DATA    081H
  00C4                59     IAP_ADDRL       DATA    0C4H
  00D2                60     OV      BIT     0D0H.2
  00BF                61     PPCA    BIT     0B8H.7
  009E                62     LIRTRIM DATA    09EH
  00E6                63     CMPCR1  DATA    0E6H
  00E7                64     CMPCR2  DATA    0E7H
  00AE                65     ELVD    BIT     0A8H.6
  0080                66     P00     BIT     080H.0
  00BC                67     ADC_CONTR       DATA    0BCH
  0099                68     SBUF    DATA    099H
  0090                69     P10     BIT     090H.0
  0087                70     PCON    DATA    087H
  0081                71     P01     BIT     080H.1
  00A0                72     P20     BIT     0A0H.0
  0091                73     P11     BIT     090H.1
  0082                74     P02     BIT     080H.2
  00F5                75     IAP_TPS DATA    0F5H
  00B0                76     P30     BIT     0B0H.0
  00A1                77     P21     BIT     0A0H.1
  0092                78     P12     BIT     090H.2
  0083                79     P03     BIT     080H.3
  00C0                80     P40     BIT     0C0H.0
  00B1                81     P31     BIT     0B0H.1
  00A2                82     P22     BIT     0A0H.2
  0098                83     SCON    DATA    098H
  0093                84     P13     BIT     090H.3
  0084                85     P04     BIT     080H.4
  00C8                86     P50     BIT     0C8H.0
  00C1                87     P41     BIT     0C0H.1
  00B2                88     P32     BIT     0B0H.2
  00A3                89     P23     BIT     0A0H.3
  0094                90     P14     BIT     090H.4
  0089                91     TMOD    DATA    089H
  0088                92     TCON    DATA    088H
  0085                93     P05     BIT     080H.5
  00C9                94     P51     BIT     0C8H.1
  00C2                95     P42     BIT     0C0H.2
  00B3                96     P33     BIT     0B0H.3
  00A4                97     P24     BIT     0A0H.4
  0095                98     P15     BIT     090H.5
  0086                99     P06     BIT     080H.6
  00CA               100     P52     BIT     0C8H.2
  00C3               101     P43     BIT     0C0H.3
  00BE               102     PLVD    BIT     0B8H.6
  00B4               103     P34     BIT     0B0H.4
  00A5               104     P25     BIT     0A0H.5
  0096               105     P16     BIT     090H.6
  0087               106     P07     BIT     080H.7
  00CB               107     P53     BIT     0C8H.3
  00C4               108     P44     BIT     0C0H.4
  00B5               109     P35     BIT     0B0H.5
  00A6               110     P26     BIT     0A0H.6
  0097               111     P17     BIT     090H.7
  00CC               112     P54     BIT     0C8H.4
  00C5               113     P45     BIT     0C0H.5
  00B6               114     P36     BIT     0B0H.6
  00A7               115     P27     BIT     0A0H.7
  00C6               116     P46     BIT     0C0H.6
  00B7               117     P37     BIT     0B0H.7
  00C7               118     P47     BIT     0C0H.7
  0089               119     IE0     BIT     088H.1
  008B               120     IE1     BIT     088H.3
  00AF               121     IE2     DATA    0AFH
  00F0               122     B       DATA    0F0H
  008E               123     AUXR    DATA    08EH
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     3

  00FC               124     USBADR  DATA    0FCH
  00C7               125     IAP_CONTR       DATA    0C7H
  00EC               126     USBDAT  DATA    0ECH
  00DC               127     USBCLK  DATA    0DCH
  00E0               128     ACC     DATA    0E0H
  00A9               129     ET0     BIT     0A8H.1
  00AB               130     ET1     BIT     0A8H.3
  008D               131     TF0     BIT     088H.5
  00FF               132     RSTCFG  DATA    0FFH
  00B5               133     IP2     DATA    0B5H
  008F               134     TF1     BIT     088H.7
  00F4               135     USBCON  DATA    0F4H
  00DF               136     IP3     DATA    0DFH
  009A               137     RB8     BIT     098H.2
  008C               138     TH0     DATA    08CH
  00A8               139     EX0     BIT     0A8H.0
  008D               140     TH1     DATA    08DH
  0088               141     IT0     BIT     088H.0
  00D6               142     TH2     DATA    0D6H
  00D6               143     T2H     DATA    0D6H
  00AA               144     EX1     BIT     0A8H.2
  009B               145     TB8     BIT     098H.3
  008A               146     IT1     BIT     088H.2
  00D4               147     T3H     DATA    0D4H
  00D0               148     P       BIT     0D0H.0
  00D2               149     T4H     DATA    0D2H
  009F               150     SM0     BIT     098H.7
  008A               151     TL0     DATA    08AH
  009E               152     SM1     BIT     098H.6
  008B               153     TL1     DATA    08BH
  00D7               154     TL2     DATA    0D7H
  00D7               155     T2L     DATA    0D7H
  009D               156     SM2     BIT     098H.5
  00D5               157     T3L     DATA    0D5H
  00D3               158     T4L     DATA    0D3H
  00B9               159     PT0     BIT     0B8H.1
  00D3               160     RS0     BIT     0D0H.3
  00BB               161     PT1     BIT     0B8H.3
  00D4               162     RS1     BIT     0D0H.4
  00C2               163     IAP_DATA        DATA    0C2H
  008C               164     TR0     BIT     088H.4
  008E               165     TR1     BIT     088H.6
  00C1               166     WDT_CONTR       DATA    0C1H
  00B8               167     PX0     BIT     0B8H.0
  00BA               168     PX1     BIT     0B8H.2
  009F               169     IRTRIM  DATA    09FH
  0083               170     DPH     DATA    083H
  00D1               171     T4T3M   DATA    0D1H
  00BE               172     ADC_RESL        DATA    0BEH
  0082               173     DPL     DATA    082H
  00CD               174     SPSTAT  DATA    0CDH
  00B7               175     IPH     DATA    0B7H
  009B               176     S2BUF   DATA    09BH
  00AD               177     S3BUF   DATA    0ADH
  009C               178     REN     BIT     098H.4
  0085               179     S4BUF   DATA    085H
  009A               180     S2CON   DATA    09AH
  00E3               181     DPS     DATA    0E3H
  00AC               182     S3CON   DATA    0ACH
  0084               183     S4CON   DATA    084H
  00EF               184     AUXINTIF        DATA    0EFH
  00B9               185     SADEN   DATA    0B9H
  00A9               186     SADDR   DATA    0A9H
  00C6               187     IAP_TRIG        DATA    0C6H
  00D5               188     F0      BIT     0D0H.5
  009D               189     IRCBAND DATA    09DH
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     4

  008F               190     INT_CLKO        DATA    08FH
  00D0               191     PSW     DATA    0D0H
  00CF               192     SPDAT   DATA    0CFH
  0094               193     P0M0    DATA    094H
                     194     ?PR?os_cpu_sr_save?TASK_SWITCH           SEGMENT CODE 
                     195     ?PR?_os_cpu_sr_restore?TASK_SWITCH       SEGMENT CODE 
                     196     ?PR?_os_tesk_stack_init?TASK_SWITCH      SEGMENT CODE 
                     197     ?DT?_os_tesk_stack_init?TASK_SWITCH      SEGMENT DATA OVERLAYABLE 
                     198     ?PR?_os_delay?TASK_SWITCH                SEGMENT CODE 
                     199     ?DT?_os_delay?TASK_SWITCH                SEGMENT DATA OVERLAYABLE 
                     200     ?PR?os_time_tick?TASK_SWITCH             SEGMENT CODE 
                     201     ?PR?timer0_isr?TASK_SWITCH               SEGMENT CODE 
                     202     ?DT?timer0_isr?TASK_SWITCH               SEGMENT DATA OVERLAYABLE 
                     203             EXTRN   DATA (os_task_running_id)
                     204             EXTRN   CODE (os_int_enter)
                     205             EXTRN   DATA (os_map_tab)
                     206             EXTRN   DATA (os_int_count)
                     207             EXTRN   CODE (os_int_exit)
                     208             EXTRN   DATA (os_task_rdy_tab)
                     209             EXTRN   BIT (os_running)
                     210             EXTRN   IDATA (os_tcb)
                     211             PUBLIC  timer0_isr
                     212             PUBLIC  os_time_tick
                     213             PUBLIC  _os_delay
                     214             PUBLIC  _os_tesk_stack_init
                     215             PUBLIC  _os_cpu_sr_restore
                     216             PUBLIC  os_cpu_sr_save
                     217     
----                 218             RSEG  ?DT?timer0_isr?TASK_SWITCH
0000                 219     ?timer0_isr?BYTE:
0000                 220          cpu_sr?547:   DS   1
                     221     
----                 222             RSEG  ?DT?_os_tesk_stack_init?TASK_SWITCH
0000                 223     ?_os_tesk_stack_init?BYTE:
0000                 224            r_sp?242:   DS   1
                     225     
----                 226             RSEG  ?DT?_os_delay?TASK_SWITCH
0000                 227     ?_os_delay?BYTE:
0000                 228           tisks?343:   DS   1
                     229     ; #include "task_switch.h"
                     230     ; #include "reg51.h"
                     231     ; #include "core.h"
                     232     ; 
                     233     ; 
                     234     ; /* ½øÈëÁÙ½ç¶Î */
                     235     ; char os_cpu_sr_save(void)
                     236     
----                 237             RSEG  ?PR?os_cpu_sr_save?TASK_SWITCH
0000                 238     os_cpu_sr_save:
                     239             USING   0
                     240                             ; SOURCE LINE # 7
                     241     ; {
                     242                             ; SOURCE LINE # 8
                     243     ;       __asm mov r7,IE         //µÃµ½ ¡¸IE¡¹ÖÐ¶Ï¿ØÖÆ¼Ä´æÆ÷Öµ
0000 AFA8            244              mov r7,IE               
                     245     ;       __asm mov IE,#0
0002 75A800          246              mov IE,#0
                     247     ;       __asm ret                       //·µ»ØÖµÊÇÔÚr7ÖÐ
0005 22              248              ret                     
                     249     ;       return 0;                       //·µ»ØÕâÌõÖ¸ÁîÊµ¼Ê²»»á±»Ö´ÐÐµ½,µ«ÒòÎªÕâ¸öº¯ÊÈ·ÊµÒª·
                             µ»ØÖµ,ËùÒÔÐ´Ò»ÏÂ(²»È»»áÓÐ¾¯¸æ)
                     250                             ; SOURCE LINE # 12
0006 7F00            251             MOV     R7,#00H
                     252     ; }
                     253                             ; SOURCE LINE # 13
0008                 254     ?C0001:
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     5

0008 22              255             RET     
                     256     ; END OF os_cpu_sr_save
                     257     
                     258     ; 
                     259     ; 
                     260     ; /* ÍË³öÁÙ½ç¶Î */
                     261     ; void os_cpu_sr_restore(char cpu_sr)
                     262     
----                 263             RSEG  ?PR?_os_cpu_sr_restore?TASK_SWITCH
0000                 264     _os_cpu_sr_restore:
                     265             USING   0
                     266                             ; SOURCE LINE # 17
                     267     ;---- Variable 'cpu_sr?140' assigned to Register 'R7' ----
                     268     ; {
                     269                             ; SOURCE LINE # 18
                     270     ;       cpu_sr = cpu_sr;        //µÚÒ»¸ö²ÎÊ(charÀàÐÍ)ÊÇ´æÔÚr7ÀïÃæµÄ,
                     271                             ; SOURCE LINE # 19
                     272     ;       __asm mov IE,r7         //»Ö¸´ÖÐ¶Ï¿ØÖÆ¼Ä´æÆ÷Öµ
0000 8FA8            273              mov IE,r7               
                     274     ;       __asm ret                       //Ò²¿ÉÒÔÃ»ÓÐ(º¯Ê»áÓÐret)
0002 22              275              ret                     
                     276     ; }
                     277                             ; SOURCE LINE # 22
0003 22              278             RET     
                     279     ; END OF _os_cpu_sr_restore
                     280     
                     281     ; 
                     282     ; 
                     283     ; 
                     284     ; /* ÈÎÎñ¶ÑÕ»³õÊ¼»¯ */
                     285     ; unsigned char os_tesk_stack_init(unsigned char stack_point)
                     286     
----                 287             RSEG  ?PR?_os_tesk_stack_init?TASK_SWITCH
0000                 288     _os_tesk_stack_init:
                     289             USING   0
                     290                             ; SOURCE LINE # 27
                     291     ;---- Variable 'stack_point?241' assigned to Register 'R7' ----
                     292     ; {
                     293                             ; SOURCE LINE # 28
                     294     ;       unsigned char r_sp = SP;
                     295                             ; SOURCE LINE # 29
0000 858100   F      296             MOV     r_sp?242,SP
                     297     ;       SP = stack_point;       //¼Ä´æÆ÷ÈëÕ»(ÔÚ´ËÖ®Ç°²»ÄÜÓÐÈÎºÎÔËËã²Ù×÷,²»È»»á¸Ä±ä¼Ä´æÆ÷Öµ)
                     298                             ; SOURCE LINE # 30
0003 8F81            299             MOV     SP,R7
                     300     ;       __asm PUSH ACC          //ÀÛ¼ÓÆ÷        
0005 C0E0            301              PUSH ACC                
                     302     ;       __asm PUSH B            //ÓÃÓÚ³Ë³µÄ¼Ä´æÆ÷
0007 C0F0            303              PUSH B          
                     304     ;       __asm PUSH DPH          //Ê¾ÝÖ¸Õë£¬ÓÃÍ¾´ó
0009 C083            305              PUSH DPH                
                     306     ;       __asm PUSH DPL          //Ê¾ÝÖ¸Õë£¬ÓÃÍ¾´ó
000B C082            307              PUSH DPL                
                     308     ;       __asm PUSH PSW          //±êÖ¾Î»¼Ä´æÆ÷
000D C0D0            309              PUSH PSW                
                     310     ;       __asm PUSH 0
000F C000            311              PUSH 0
                     312     ;       __asm PUSH 1
0011 C001            313              PUSH 1
                     314     ;       __asm PUSH 2
0013 C002            315              PUSH 2
                     316     ;       __asm PUSH 3
0015 C003            317              PUSH 3
                     318     ;       __asm PUSH 4
0017 C004            319              PUSH 4
                     320     ;       __asm PUSH 5
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     6

0019 C005            321              PUSH 5
                     322     ;       __asm PUSH 6
001B C006            323              PUSH 6
                     324     ;       __asm PUSH 7
001D C007            325              PUSH 7
                     326     ; 
                     327     ;       stack_point = SP;
                     328                             ; SOURCE LINE # 45
001F AF81            329             MOV     R7,SP
                     330     ;       SP = r_sp;
                     331                             ; SOURCE LINE # 46
0021 850081   F      332             MOV     SP,r_sp?242
                     333     ; 
                     334     ;       return stack_point;
                     335                             ; SOURCE LINE # 48
                     336     ; }
                     337                             ; SOURCE LINE # 49
0024                 338     ?C0003:
0024 22              339             RET     
                     340     ; END OF _os_tesk_stack_init
                     341     
                     342     ; 
                     343     ; 
                     344     ; /*ÒòÎªÃ»ÓÐ¶ÔPCÖ±½Ó²Ù×÷µÄÖ¸Áî,µ«ÖÐ¶Ï¹³ÌºÍ¹³Ìµ÷ÓÃ¿ÉÒÔÊ¹PCÈëÕ»,
                     345     ; ÖÐ¶Ï·µ»Ø,¹³Ì·µ»Ø¿ÉÒÔ,Ê¹PC³öÕ»,¿ÉÒÔ¼ä½ÓµÄÀûÓÃ´Ë·½·¨¶ÔPC²Ù×÷*/
                     346     ; 
                     347     ; /* ÏµÍ³ÑÓÊ± */
                     348     ; void os_delay(unsigned char tisks)
                     349     
----                 350             RSEG  ?PR?_os_delay?TASK_SWITCH
0000                 351     _os_delay:
                     352             USING   0
                     353                             ; SOURCE LINE # 56
0000 8F00     F      354             MOV     tisks?343,R7
                     355     ; {
                     356                             ; SOURCE LINE # 57
                     357     ;       unsigned char i;
                     358     ; 
                     359     ;       if(tisks > 0)
                     360                             ; SOURCE LINE # 60
0002 E500     F      361             MOV     A,tisks?343
0004 D3              362             SETB    C
0005 9400            363             SUBB    A,#00H
0007 5003            364             JNC     $ + 5H
0009 020000   F      365             LJMP    ?C0010
                     366     ;       {
                     367                             ; SOURCE LINE # 61
                     368     ;               EA = 0;                                         //Ö±½Ó²Ù×÷,¶ø²»ÓÃÁÙ½ç¶ÎµÄ·½
                             ·¨Ö÷ÒªÊÇÎªÁËÈÎÎñÇÐ»»¸ü¿ì
                     369                             ; SOURCE LINE # 62
000C C2AF            370             CLR     EA
                     371     ;               /*Ñ¹Õ»*/
                     372     ;               __asm PUSH ACC                          //¼Ä´æÆ÷ÈëÕ»(ÔÚ´ËÖ®Ç°²»ÄÜÓÐÈÎºÎÔËËã
                             ²Ù×÷,²»È»»á¸Ä±ä¼Ä´æÆ÷Öµ)
000E C0E0            373              PUSH ACC                                
                     374     ;               __asm PUSH B
0010 C0F0            375              PUSH B
                     376     ;               __asm PUSH DPH
0012 C083            377              PUSH DPH
                     378     ;               __asm PUSH DPL
0014 C082            379              PUSH DPL
                     380     ;               __asm PUSH PSW
0016 C0D0            381              PUSH PSW
                     382     ;               __asm PUSH 0
0018 C000            383              PUSH 0
                     384     ;               __asm PUSH 1
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     7

001A C001            385              PUSH 1
                     386     ;               __asm PUSH 2
001C C002            387              PUSH 2
                     388     ;               __asm PUSH 3
001E C003            389              PUSH 3
                     390     ;               __asm PUSH 4
0020 C004            391              PUSH 4
                     392     ;               __asm PUSH 5
0022 C005            393              PUSH 5
                     394     ;               __asm PUSH 6
0024 C006            395              PUSH 6
                     396     ;               __asm PUSH 7
0026 C007            397              PUSH 7
                     398     ;               os_tcb[os_task_running_id].os_task_stcak_top = SP;
                     399                             ; SOURCE LINE # 77
0028 AF00     F      400             MOV     R7,os_task_running_id
002A EF              401             MOV     A,R7
002B 25E0            402             ADD     A,ACC
002D 25E0            403             ADD     A,ACC
002F 2400     F      404             ADD     A,#LOW (os_tcb+01H)
0031 F8              405             MOV     R0,A
0032 A681            406             MOV     @R0,SP
                     407     ;               os_tcb[os_task_running_id].os_tsak_wait_tick = tisks;   //ÑÓÊ±Ê±¼ä
                     408                             ; SOURCE LINE # 78
0034 AF00     F      409             MOV     R7,os_task_running_id
0036 EF              410             MOV     A,R7
0037 25E0            411             ADD     A,ACC
0039 25E0            412             ADD     A,ACC
003B 2400     F      413             ADD     A,#LOW (os_tcb)
003D F8              414             MOV     R0,A
003E A600     F      415             MOV     @R0,tisks?343
                     416     ;               os_tcb[os_task_running_id].suspend = 1;                                 //Ò
                             òÎªÓÐÑÓÊ±,ËùÒÔÏÈ¹ÒÆð±¾ÈÎÎñ
                     417                             ; SOURCE LINE # 79
0040 AF00     F      418             MOV     R7,os_task_running_id
0042 EF              419             MOV     A,R7
0043 25E0            420             ADD     A,ACC
0045 25E0            421             ADD     A,ACC
0047 2400     F      422             ADD     A,#LOW (os_tcb+03H)
0049 F8              423             MOV     R0,A
004A 7601            424             MOV     @R0,#01H
                     425     ;               for(i=0; i<MAX_TASK; i++)                                                  
                                          //ÕÒµ½ÒÑ¾­¾ÍÐ÷,Î´±»¹ÒÆð,ÇÒÓÅÏÈ¼¶×î¸ßµÄÈÎÎñ
                     426                             ; SOURCE LINE # 80
                     427     ;---- Variable 'i?344' assigned to Register 'R7' ----
004C E4              428             CLR     A
004D FF              429             MOV     R7,A
004E                 430     ?C0005:
                     431     ;               {
                     432                             ; SOURCE LINE # 81
                     433     ;                       if(os_task_rdy_tab & os_map_tab[i])
                     434                             ; SOURCE LINE # 82
004E 7400     F      435             MOV     A,#LOW (os_map_tab)
0050 2F              436             ADD     A,R7
0051 F8              437             MOV     R0,A
0052 E6              438             MOV     A,@R0
0053 5500     F      439             ANL     A,os_task_rdy_tab
0055 600B            440             JZ      ?C0007
                     441     ;                       {
                     442                             ; SOURCE LINE # 83
                     443     ;                               if(0 == os_tcb[i].suspend)
                     444                             ; SOURCE LINE # 84
0057 EF              445             MOV     A,R7
0058 25E0            446             ADD     A,ACC
005A 25E0            447             ADD     A,ACC
005C 2400     F      448             ADD     A,#LOW (os_tcb+03H)
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     8

005E F8              449             MOV     R0,A
005F E6              450             MOV     A,@R0
0060 6004            451             JZ      ?C0006
                     452     ;                               {
                     453                             ; SOURCE LINE # 85
                     454     ;                                       break;
                     455                             ; SOURCE LINE # 86
                     456     ;                               }
                     457                             ; SOURCE LINE # 87
0062                 458     ?C0009:
                     459     ;                       }
                     460                             ; SOURCE LINE # 88
                     461     ;               }
                     462                             ; SOURCE LINE # 89
0062                 463     ?C0007:
0062 0F              464             INC     R7
0063 BF03E8          465             CJNE    R7,#03H,?C0005
0066                 466     ?C0006:
                     467     ;               /*¿ÉÖ´ÐÐµÄ×î¸ßÓÅÏÈ¼¶ÈÎÎñ*/
                     468     ;               os_task_running_id = i;
                     469                             ; SOURCE LINE # 91
0066 8F00     F      470             MOV     os_task_running_id,R7
                     471     ; 
                     472     ;               SP = os_tcb[os_task_running_id].os_task_stcak_top;      //×î¸ßÓÅÏÈ¼¶ÈÎÎñµÄÕ
                             »¶¥
                     473                             ; SOURCE LINE # 93
0068 AF00     F      474             MOV     R7,os_task_running_id
006A EF              475             MOV     A,R7
006B 25E0            476             ADD     A,ACC
006D 25E0            477             ADD     A,ACC
006F 2400     F      478             ADD     A,#LOW (os_tcb+01H)
0071 F8              479             MOV     R0,A
0072 E6              480             MOV     A,@R0
0073 F581            481             MOV     SP,A
                     482     ;               /*³öÕ»*/
                     483     ;               __asm POP 7
0075 D007            484              POP 7
                     485     ;               __asm POP 6
0077 D006            486              POP 6
                     487     ;               __asm POP 5
0079 D005            488              POP 5
                     489     ;               __asm POP 4
007B D004            490              POP 4
                     491     ;               __asm POP 3
007D D003            492              POP 3
                     493     ;               __asm POP 2
007F D002            494              POP 2
                     495     ;               __asm POP 1
0081 D001            496              POP 1
                     497     ;               __asm POP 0
0083 D000            498              POP 0
                     499     ;               __asm POP PSW
0085 D0D0            500              POP PSW
                     501     ;               __asm POP DPL
0087 D082            502              POP DPL
                     503     ;               __asm POP DPH
0089 D083            504              POP DPH
                     505     ;               __asm POP B
008B D0F0            506              POP B
                     507     ;               __asm POP ACC
008D D0E0            508              POP ACC
                     509     ;               EA = 1;
                     510                             ; SOURCE LINE # 108
008F D2AF            511             SETB    EA
                     512     ;       }
                     513                             ; SOURCE LINE # 109
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE     9

                     514     ; }
                     515                             ; SOURCE LINE # 110
0091                 516     ?C0010:
0091 22              517             RET     
                     518     ; END OF _os_delay
                     519     
                     520     ; 
                     521     ; /* ÏµÍ³ÐÄÌø¸üÐÂ */
                     522     ; void os_time_tick(void)
                     523     
----                 524             RSEG  ?PR?os_time_tick?TASK_SWITCH
0000                 525     os_time_tick:
                     526             USING   0
                     527                             ; SOURCE LINE # 113
                     528     ; {
                     529                             ; SOURCE LINE # 114
                     530     ;       unsigned char i;
                     531     ;       
                     532     ;       for(i=0; i<MAX_TASK; i++)
                     533                             ; SOURCE LINE # 117
                     534     ;---- Variable 'i?445' assigned to Register 'R7' ----
0000 E4              535             CLR     A
0001 FF              536             MOV     R7,A
0002                 537     ?C0011:
                     538     ;       {
                     539                             ; SOURCE LINE # 118
                     540     ;               if(os_tcb[i].os_tsak_wait_tick)
                     541                             ; SOURCE LINE # 119
0002 EF              542             MOV     A,R7
0003 25E0            543             ADD     A,ACC
0005 25E0            544             ADD     A,ACC
0007 2400     F      545             ADD     A,#LOW (os_tcb)
0009 F8              546             MOV     R0,A
000A E6              547             MOV     A,@R0
000B 601E            548             JZ      ?C0013
                     549     ;               {
                     550                             ; SOURCE LINE # 120
                     551     ;                       os_tcb[i].os_tsak_wait_tick--;
                     552                             ; SOURCE LINE # 121
000D EF              553             MOV     A,R7
000E 25E0            554             ADD     A,ACC
0010 25E0            555             ADD     A,ACC
0012 2400     F      556             ADD     A,#LOW (os_tcb)
0014 F8              557             MOV     R0,A
0015 16              558             DEC     @R0
                     559     ;                       /*Ã»ÓÐµÈ´Ê±¼ä,ÔòÈÎÎñ½øÈë¾ÍÐ÷×´Ì¬*/
                     560     ;                       if(0 == os_tcb[i].os_tsak_wait_tick)
                     561                             ; SOURCE LINE # 123
0016 EF              562             MOV     A,R7
0017 25E0            563             ADD     A,ACC
0019 25E0            564             ADD     A,ACC
001B 2400     F      565             ADD     A,#LOW (os_tcb)
001D F8              566             MOV     R0,A
001E E6              567             MOV     A,@R0
001F 700A            568             JNZ     ?C0013
                     569     ;                       {
                     570                             ; SOURCE LINE # 124
                     571     ;                               os_tcb[i].suspend = 0;
                     572                             ; SOURCE LINE # 125
0021 EF              573             MOV     A,R7
0022 25E0            574             ADD     A,ACC
0024 25E0            575             ADD     A,ACC
0026 2400     F      576             ADD     A,#LOW (os_tcb+03H)
0028 F8              577             MOV     R0,A
0029 E4              578             CLR     A
002A F6              579             MOV     @R0,A
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    10

                     580     ;                       }
                     581                             ; SOURCE LINE # 126
                     582     ;               }
                     583                             ; SOURCE LINE # 127
                     584     ;       }
                     585                             ; SOURCE LINE # 128
002B                 586     ?C0013:
002B 0F              587             INC     R7
002C BF03D3          588             CJNE    R7,#03H,?C0011
                     589     ; }
                     590                             ; SOURCE LINE # 129
002F                 591     ?C0016:
002F 22              592             RET     
                     593     ; END OF os_time_tick
                     594     
----                 595     CSEG    AT      0000BH
000B 020000   F      596             LJMP    timer0_isr
                     597     
                     598     ; 
                     599     ; /* 
                     600     ; ÈÎÎñÇÐ»»ÐÄÌø 5ms
                     601     ; interrupt 1ÊÇ¶¨Ê±Æ÷ÖÐ¶Ï 
                     602     ; using 0 Ä¬ÈÏÓÃ,ËùÓÐµÄ¼Ä´æÆ÷»á×Ô¶¯ÈëÕ»
                     603     ; ÓÃusing 1 2 3 ÔòÐèÒªÊÖ¶¯¶Ôr0-r7ÈëÕ»,³öÕ»(Çë²é¿´¼Ä´æÆ÷×éÑ¡Ôñ(¿´ÈÎÒâÒ»±¾½²51µÄÊé))
                     604     ; */
                     605     ; void timer0_isr(void) interrupt 1
                     606     
----                 607             RSEG  ?PR?timer0_isr?TASK_SWITCH
                     608             USING   0
0000                 609     timer0_isr:
0000 C0E0            610             PUSH    ACC
0002 C0F0            611             PUSH    B
0004 C083            612             PUSH    DPH
0006 C082            613             PUSH    DPL
0008 C0D0            614             PUSH    PSW
000A 75D000          615             MOV     PSW,#00H
000D C000            616             PUSH    AR0
000F C001            617             PUSH    AR1
0011 C002            618             PUSH    AR2
0013 C003            619             PUSH    AR3
0015 C004            620             PUSH    AR4
0017 C005            621             PUSH    AR5
0019 C006            622             PUSH    AR6
001B C007            623             PUSH    AR7
                     624             USING   0
                     625                             ; SOURCE LINE # 137
                     626     ; {
                     627     ;       unsigned char i;
                     628     ;       char cpu_sr;
                     629     ; 
                     630     ;       if(os_true == os_running)
                     631                             ; SOURCE LINE # 142
001D 30005B   F      632             JNB     os_running,?C0025
                     633     ;       {
                     634                             ; SOURCE LINE # 143
                     635     ;               os_enter_critical();
                     636                             ; SOURCE LINE # 144
0020 120000   F      637             LCALL   os_cpu_sr_save
0023 8F00     F      638             MOV     cpu_sr?547,R7
                     639     ;               os_int_enter();
                     640                             ; SOURCE LINE # 145
0025 120000   F      641             LCALL   os_int_enter
                     642     ;               
                     643     ;               os_time_tick();
                     644                             ; SOURCE LINE # 147
0028 120000   F      645             LCALL   os_time_tick
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    11

                     646     ;               /*µ±È»,51µ¥Æ¬»ú×î¶àÖ»ÄÜÓÐÒ»´ÎÖÐ¶ÏÇ¶Ì×,os_int_count×î´óÎª2(+±¾´Î)*/
                     647     ;               if(1 == os_int_count)
                     648                             ; SOURCE LINE # 149
002B E500     F      649             MOV     A,os_int_count
002D 6401            650             XRL     A,#01H
002F 703A            651             JNZ     ?C0018
                     652     ;               {
                     653                             ; SOURCE LINE # 150
                     654     ;                       os_tcb[os_task_running_id].os_task_stcak_top = SP;      
                     655                             ; SOURCE LINE # 151
0031 AF00     F      656             MOV     R7,os_task_running_id
0033 EF              657             MOV     A,R7
0034 25E0            658             ADD     A,ACC
0036 25E0            659             ADD     A,ACC
0038 2400     F      660             ADD     A,#LOW (os_tcb+01H)
003A F8              661             MOV     R0,A
003B A681            662             MOV     @R0,SP
                     663     ;                       /*ÕÒµ½ÒÑ¾­¾ÍÐ÷,Î´±»¹ÒÆð,ÇÒÓÅÏÈ¼¶×î¸ßµÄÈÎÎñ(ÈÎÎñµ÷¶ÈÆ÷)*/
                     664     ;                       for(i=0; i<MAX_TASK; i++)
                     665                             ; SOURCE LINE # 153
                     666     ;---- Variable 'i?546' assigned to Register 'R7' ----
003D E4              667             CLR     A
003E FF              668             MOV     R7,A
003F                 669     ?C0019:
                     670     ;                       {
                     671                             ; SOURCE LINE # 154
                     672     ;                               if(os_task_rdy_tab & os_map_tab[i])
                     673                             ; SOURCE LINE # 155
003F 7400     F      674             MOV     A,#LOW (os_map_tab)
0041 2F              675             ADD     A,R7
0042 F8              676             MOV     R0,A
0043 E6              677             MOV     A,@R0
0044 5500     F      678             ANL     A,os_task_rdy_tab
0046 600B            679             JZ      ?C0021
                     680     ;                               {
                     681                             ; SOURCE LINE # 156
                     682     ;                                       /*ÓÃsuspend ÅÐ¶ÏÐÝÃßÊ±¼äÒÑ¾­µ½£¬¿ÉÒÔÖ´ÐÐÈÎÎñ²¿·Ö*/
                     683     ;                                       if(0 == os_tcb[i].suspend)
                     684                             ; SOURCE LINE # 158
0048 EF              685             MOV     A,R7
0049 25E0            686             ADD     A,ACC
004B 25E0            687             ADD     A,ACC
004D 2400     F      688             ADD     A,#LOW (os_tcb+03H)
004F F8              689             MOV     R0,A
0050 E6              690             MOV     A,@R0
0051 6004            691             JZ      ?C0020
                     692     ;                                       {
                     693                             ; SOURCE LINE # 159
                     694     ;                                               break;
                     695                             ; SOURCE LINE # 160
                     696     ;                                       }
                     697                             ; SOURCE LINE # 161
0053                 698     ?C0023:
                     699     ;                               }
                     700                             ; SOURCE LINE # 162
                     701     ;                       }
                     702                             ; SOURCE LINE # 163
0053                 703     ?C0021:
0053 0F              704             INC     R7
0054 BF03E8          705             CJNE    R7,#03H,?C0019
0057                 706     ?C0020:
                     707     ;                       /*ÏÖÔÚÖ´ÐÐµÄÈÎÎñ¾ÍÊÇÓÅÏÈ¼¶×î¸ßµÄ,ËùÒÔ²»ÐèÒªÈÎÎñÇÐ»»*/
                     708     ;                       if(os_task_running_id != i)
                     709                             ; SOURCE LINE # 165
0057 E500     F      710             MOV     A,os_task_running_id
0059 6F              711             XRL     A,R7
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    12

005A 600F            712             JZ      ?C0018
                     713     ;                       {
                     714                             ; SOURCE LINE # 166
                     715     ;                               /*¿ÉÖ´ÐÐµÄ×î¸ßÓÅÏÈ¼¶ÈÎÎñ*/
                     716     ;                               os_task_running_id = i;
                     717                             ; SOURCE LINE # 168
005C 8F00     F      718             MOV     os_task_running_id,R7
                     719     ;                               /*×î¸ßÓÅÏÈ¼¶ÈÎÎñµÄÕ»¶¥*/
                     720     ;                               /*SPÊÇ¶ÑÕ»Ö¸Õë£¬Ö¸ÏòÕ»¶¥*/
                     721     ;                               SP = os_tcb[os_task_running_id].os_task_stcak_top;
                     722                             ; SOURCE LINE # 171
005E AF00     F      723             MOV     R7,os_task_running_id
0060 EF              724             MOV     A,R7
0061 25E0            725             ADD     A,ACC
0063 25E0            726             ADD     A,ACC
0065 2400     F      727             ADD     A,#LOW (os_tcb+01H)
0067 F8              728             MOV     R0,A
0068 E6              729             MOV     A,@R0
0069 F581            730             MOV     SP,A
                     731     ;                       }
                     732                             ; SOURCE LINE # 172
                     733     ;               }
                     734                             ; SOURCE LINE # 173
006B                 735     ?C0018:
                     736     ;               /*Çå³ÖÐ¶Ï±êÖ¾*/
                     737     ;               TF0 = 0;
                     738                             ; SOURCE LINE # 175
006B C28D            739             CLR     TF0
                     740     ;               /*Ê±¼äÖØ×°ÔØ*/
                     741     ;               TH0 = 0xee;
                     742                             ; SOURCE LINE # 177
006D 758CEE          743             MOV     TH0,#0EEH
                     744     ;               TL0 = 0x00;
                     745                             ; SOURCE LINE # 178
0070 758A00          746             MOV     TL0,#00H
                     747     ;               os_int_exit();
                     748                             ; SOURCE LINE # 179
0073 120000   F      749             LCALL   os_int_exit
                     750     ;               os_exit_critical();
                     751                             ; SOURCE LINE # 180
0076 AF00     F      752             MOV     R7,cpu_sr?547
0078 120000   F      753             LCALL   _os_cpu_sr_restore
                     754     ;       }
                     755                             ; SOURCE LINE # 181
                     756     ;       
                     757     ; }
                     758                             ; SOURCE LINE # 183
007B                 759     ?C0025:
007B D007            760             POP     AR7
007D D006            761             POP     AR6
007F D005            762             POP     AR5
0081 D004            763             POP     AR4
0083 D003            764             POP     AR3
0085 D002            765             POP     AR2
0087 D001            766             POP     AR1
0089 D000            767             POP     AR0
008B D0D0            768             POP     PSW
008D D082            769             POP     DPL
008F D083            770             POP     DPH
0091 D0F0            771             POP     B
0093 D0E0            772             POP     ACC
0095 32              773             RETI    
                     774     ; END OF timer0_isr
                     775     
                     776             END
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E                              T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . . . . . . . . . .  C ADDR   0008H   R   SEG=?PR?OS_CPU_SR_SAVE?TASK_SWITCH
?C0003. . . . . . . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?_OS_TESK_STACK_INIT?TASK_SWITCH
?C0005. . . . . . . . . . . . . . .  C ADDR   004EH   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0006. . . . . . . . . . . . . . .  C ADDR   0066H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0007. . . . . . . . . . . . . . .  C ADDR   0062H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0009. . . . . . . . . . . . . . .  C ADDR   0062H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0010. . . . . . . . . . . . . . .  C ADDR   0091H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0011. . . . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0013. . . . . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0016. . . . . . . . . . . . . . .  C ADDR   002FH   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0018. . . . . . . . . . . . . . .  C ADDR   006BH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0019. . . . . . . . . . . . . . .  C ADDR   003FH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0020. . . . . . . . . . . . . . .  C ADDR   0057H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0021. . . . . . . . . . . . . . .  C ADDR   0053H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0023. . . . . . . . . . . . . . .  C ADDR   0053H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0025. . . . . . . . . . . . . . .  C ADDR   007BH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?DT?TIMER0_ISR?TASK_SWITCH. . . . .  D SEG    0001H       REL=UNIT
?DT?_OS_DELAY?TASK_SWITCH . . . . .  D SEG    0001H       REL=UNIT
?DT?_OS_TESK_STACK_INIT?TASK_SWITCH  D SEG    0001H       REL=UNIT
?PR?OS_CPU_SR_SAVE?TASK_SWITCH. . .  C SEG    0009H       REL=UNIT
?PR?OS_TIME_TICK?TASK_SWITCH. . . .  C SEG    0030H       REL=UNIT
?PR?TIMER0_ISR?TASK_SWITCH. . . . .  C SEG    0096H       REL=UNIT
?PR?_OS_CPU_SR_RESTORE?TASK_SWITCH.  C SEG    0004H       REL=UNIT
?PR?_OS_DELAY?TASK_SWITCH . . . . .  C SEG    0092H       REL=UNIT
?PR?_OS_TESK_STACK_INIT?TASK_SWITCH  C SEG    0025H       REL=UNIT
?TIMER0_ISR?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?TASK_SWITCH
?_OS_DELAY?BYTE . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_DELAY?TASK_SWITCH
?_OS_TESK_STACK_INIT?BYTE . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_TESK_STACK_INIT?TASK_SWITCH
AC. . . . . . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC . . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
ADCCFG. . . . . . . . . . . . . . .  D ADDR   00DEH   A   
ADC_CONTR . . . . . . . . . . . . .  D ADDR   00BCH   A   
ADC_RES . . . . . . . . . . . . . .  D ADDR   00BDH   A   
ADC_RESL. . . . . . . . . . . . . .  D ADDR   00BEH   A   
AR0 . . . . . . . . . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . . . . . . . . . .  D ADDR   0001H   A   
AR2 . . . . . . . . . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . . . . . . . . . .  D ADDR   0003H   A   
AR4 . . . . . . . . . . . . . . . .  D ADDR   0004H   A   
AR5 . . . . . . . . . . . . . . . .  D ADDR   0005H   A   
AR6 . . . . . . . . . . . . . . . .  D ADDR   0006H   A   
AR7 . . . . . . . . . . . . . . . .  D ADDR   0007H   A   
AUXINTIF. . . . . . . . . . . . . .  D ADDR   00EFH   A   
AUXR. . . . . . . . . . . . . . . .  D ADDR   008EH   A   
B . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A   
CMPCR1. . . . . . . . . . . . . . .  D ADDR   00E6H   A   
CMPCR2. . . . . . . . . . . . . . .  D ADDR   00E7H   A   
CPU_SR?547. . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?TASK_SWITCH
CY. . . . . . . . . . . . . . . . .  B ADDR   00D0H.7 A   
DPH . . . . . . . . . . . . . . . .  D ADDR   0083H   A   
DPH1. . . . . . . . . . . . . . . .  D ADDR   00E5H   A   
DPL . . . . . . . . . . . . . . . .  D ADDR   0082H   A   
DPL1. . . . . . . . . . . . . . . .  D ADDR   00E4H   A   
DPS . . . . . . . . . . . . . . . .  D ADDR   00E3H   A   
EA. . . . . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EADC. . . . . . . . . . . . . . . .  B ADDR   00A8H.5 A   
ELVD. . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
ES. . . . . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    14

EX0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
F0. . . . . . . . . . . . . . . . .  B ADDR   00D0H.5 A   
IAP_ADDRH . . . . . . . . . . . . .  D ADDR   00C3H   A   
IAP_ADDRL . . . . . . . . . . . . .  D ADDR   00C4H   A   
IAP_CMD . . . . . . . . . . . . . .  D ADDR   00C5H   A   
IAP_CONTR . . . . . . . . . . . . .  D ADDR   00C7H   A   
IAP_DATA. . . . . . . . . . . . . .  D ADDR   00C2H   A   
IAP_TPS . . . . . . . . . . . . . .  D ADDR   00F5H   A   
IAP_TRIG. . . . . . . . . . . . . .  D ADDR   00C6H   A   
IE. . . . . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . . . . .  B ADDR   0088H.3 A   
IE2 . . . . . . . . . . . . . . . .  D ADDR   00AFH   A   
INTCLKO . . . . . . . . . . . . . .  D ADDR   008FH   A   
INT_CLKO. . . . . . . . . . . . . .  D ADDR   008FH   A   
IP. . . . . . . . . . . . . . . . .  D ADDR   00B8H   A   
IP2 . . . . . . . . . . . . . . . .  D ADDR   00B5H   A   
IP2H. . . . . . . . . . . . . . . .  D ADDR   00B6H   A   
IP3 . . . . . . . . . . . . . . . .  D ADDR   00DFH   A   
IP3H. . . . . . . . . . . . . . . .  D ADDR   00EEH   A   
IPH . . . . . . . . . . . . . . . .  D ADDR   00B7H   A   
IRCBAND . . . . . . . . . . . . . .  D ADDR   009DH   A   
IRTRIM. . . . . . . . . . . . . . .  D ADDR   009FH   A   
IT0 . . . . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . . . . .  B ADDR   0088H.2 A   
LIRTRIM . . . . . . . . . . . . . .  D ADDR   009EH   A   
OS_CPU_SR_SAVE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_CPU_SR_SAVE?TASK_SWITCH
OS_INT_COUNT. . . . . . . . . . . .  D ADDR   -----       EXT
OS_INT_ENTER. . . . . . . . . . . .  C ADDR   -----       EXT
OS_INT_EXIT . . . . . . . . . . . .  C ADDR   -----       EXT
OS_MAP_TAB. . . . . . . . . . . . .  D ADDR   -----       EXT
OS_RUNNING. . . . . . . . . . . . .  B ADDR   -----       EXT
OS_TASK_RDY_TAB . . . . . . . . . .  D ADDR   -----       EXT
OS_TASK_RUNNING_ID. . . . . . . . .  D ADDR   -----       EXT
OS_TCB. . . . . . . . . . . . . . .  I ADDR   -----       EXT
OS_TIME_TICK. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
OV. . . . . . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P . . . . . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0. . . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P00 . . . . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01 . . . . . . . . . . . . . . . .  B ADDR   0080H.1 A   
P02 . . . . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03 . . . . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04 . . . . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05 . . . . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06 . . . . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07 . . . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P0M0. . . . . . . . . . . . . . . .  D ADDR   0094H   A   
P0M1. . . . . . . . . . . . . . . .  D ADDR   0093H   A   
P1. . . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P10 . . . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11 . . . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12 . . . . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13 . . . . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14 . . . . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15 . . . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16 . . . . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17 . . . . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1M0. . . . . . . . . . . . . . . .  D ADDR   0092H   A   
P1M1. . . . . . . . . . . . . . . .  D ADDR   0091H   A   
P2. . . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20 . . . . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21 . . . . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P22 . . . . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23 . . . . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    15

P24 . . . . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
P25 . . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26 . . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27 . . . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2M0. . . . . . . . . . . . . . . .  D ADDR   0096H   A   
P2M1. . . . . . . . . . . . . . . .  D ADDR   0095H   A   
P3. . . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30 . . . . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31 . . . . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P32 . . . . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33 . . . . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P34 . . . . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35 . . . . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36 . . . . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P37 . . . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3M0. . . . . . . . . . . . . . . .  D ADDR   00B2H   A   
P3M1. . . . . . . . . . . . . . . .  D ADDR   00B1H   A   
P4. . . . . . . . . . . . . . . . .  D ADDR   00C0H   A   
P40 . . . . . . . . . . . . . . . .  B ADDR   00C0H.0 A   
P41 . . . . . . . . . . . . . . . .  B ADDR   00C0H.1 A   
P42 . . . . . . . . . . . . . . . .  B ADDR   00C0H.2 A   
P43 . . . . . . . . . . . . . . . .  B ADDR   00C0H.3 A   
P44 . . . . . . . . . . . . . . . .  B ADDR   00C0H.4 A   
P45 . . . . . . . . . . . . . . . .  B ADDR   00C0H.5 A   
P46 . . . . . . . . . . . . . . . .  B ADDR   00C0H.6 A   
P47 . . . . . . . . . . . . . . . .  B ADDR   00C0H.7 A   
P4M0. . . . . . . . . . . . . . . .  D ADDR   00B4H   A   
P4M1. . . . . . . . . . . . . . . .  D ADDR   00B3H   A   
P5. . . . . . . . . . . . . . . . .  D ADDR   00C8H   A   
P50 . . . . . . . . . . . . . . . .  B ADDR   00C8H.0 A   
P51 . . . . . . . . . . . . . . . .  B ADDR   00C8H.1 A   
P52 . . . . . . . . . . . . . . . .  B ADDR   00C8H.2 A   
P53 . . . . . . . . . . . . . . . .  B ADDR   00C8H.3 A   
P54 . . . . . . . . . . . . . . . .  B ADDR   00C8H.4 A   
P5M0. . . . . . . . . . . . . . . .  D ADDR   00CAH   A   
P5M1. . . . . . . . . . . . . . . .  D ADDR   00C9H   A   
P6. . . . . . . . . . . . . . . . .  D ADDR   00E8H   A   
P6M0. . . . . . . . . . . . . . . .  D ADDR   00CCH   A   
P6M1. . . . . . . . . . . . . . . .  D ADDR   00CBH   A   
P7. . . . . . . . . . . . . . . . .  D ADDR   00F8H   A   
P7M0. . . . . . . . . . . . . . . .  D ADDR   00E2H   A   
P7M1. . . . . . . . . . . . . . . .  D ADDR   00E1H   A   
PADC. . . . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
PCON. . . . . . . . . . . . . . . .  D ADDR   0087H   A   
PLVD. . . . . . . . . . . . . . . .  B ADDR   00B8H.6 A   
PPCA. . . . . . . . . . . . . . . .  B ADDR   00B8H.7 A   
PS. . . . . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW . . . . . . . . . . . . . . . .  D ADDR   00D0H   A   
PT0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
PX0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
P_SW1 . . . . . . . . . . . . . . .  D ADDR   00A2H   A   
P_SW2 . . . . . . . . . . . . . . .  D ADDR   00BAH   A   
RB8 . . . . . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN . . . . . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0 . . . . . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1 . . . . . . . . . . . . . . . .  B ADDR   00D0H.4 A   
RSTCFG. . . . . . . . . . . . . . .  D ADDR   00FFH   A   
R_SP?242. . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_TESK_STACK_INIT?TASK_SWITCH
S2BUF . . . . . . . . . . . . . . .  D ADDR   009BH   A   
S2CON . . . . . . . . . . . . . . .  D ADDR   009AH   A   
S3BUF . . . . . . . . . . . . . . .  D ADDR   00ADH   A   
S3CON . . . . . . . . . . . . . . .  D ADDR   00ACH   A   
S4BUF . . . . . . . . . . . . . . .  D ADDR   0085H   A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:35:49 PAGE    16

S4CON . . . . . . . . . . . . . . .  D ADDR   0084H   A   
SADDR . . . . . . . . . . . . . . .  D ADDR   00A9H   A   
SADEN . . . . . . . . . . . . . . .  D ADDR   00B9H   A   
SBUF. . . . . . . . . . . . . . . .  D ADDR   0099H   A   
SCON. . . . . . . . . . . . . . . .  D ADDR   0098H   A   
SM0 . . . . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2 . . . . . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . . . . .  D ADDR   0081H   A   
SPCTL . . . . . . . . . . . . . . .  D ADDR   00CEH   A   
SPDAT . . . . . . . . . . . . . . .  D ADDR   00CFH   A   
SPSTAT. . . . . . . . . . . . . . .  D ADDR   00CDH   A   
T2H . . . . . . . . . . . . . . . .  D ADDR   00D6H   A   
T2L . . . . . . . . . . . . . . . .  D ADDR   00D7H   A   
T3H . . . . . . . . . . . . . . . .  D ADDR   00D4H   A   
T3L . . . . . . . . . . . . . . . .  D ADDR   00D5H   A   
T4H . . . . . . . . . . . . . . . .  D ADDR   00D2H   A   
T4L . . . . . . . . . . . . . . . .  D ADDR   00D3H   A   
T4T3M . . . . . . . . . . . . . . .  D ADDR   00D1H   A   
TA. . . . . . . . . . . . . . . . .  D ADDR   00AEH   A   
TASK_SWITCH . . . . . . . . . . . .  N NUMB   -----       
TB8 . . . . . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . . . . . .  D ADDR   0088H   A   
TF0 . . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . . . . . . . . . .  D ADDR   008DH   A   
TH2 . . . . . . . . . . . . . . . .  D ADDR   00D6H   A   
TI. . . . . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TIMER0_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
TISKS?343 . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_DELAY?TASK_SWITCH
TL0 . . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . . . . . .  D ADDR   008BH   A   
TL2 . . . . . . . . . . . . . . . .  D ADDR   00D7H   A   
TMOD. . . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . . . . .  B ADDR   0088H.6 A   
USBADR. . . . . . . . . . . . . . .  D ADDR   00FCH   A   
USBCLK. . . . . . . . . . . . . . .  D ADDR   00DCH   A   
USBCON. . . . . . . . . . . . . . .  D ADDR   00F4H   A   
USBDAT. . . . . . . . . . . . . . .  D ADDR   00ECH   A   
WDT_CONTR . . . . . . . . . . . . .  D ADDR   00C1H   A   
WKTCH . . . . . . . . . . . . . . .  D ADDR   00ABH   A   
WKTCL . . . . . . . . . . . . . . .  D ADDR   00AAH   A   
_OS_CPU_SR_RESTORE. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_CPU_SR_RESTORE?TASK_SWITCH
_OS_DELAY . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
_OS_TESK_STACK_INIT . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_TESK_STACK_INIT?TASK_SWITCH


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)

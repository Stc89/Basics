A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     1


MACRO ASSEMBLER A51 V8.01
OBJECT MODULE PLACED IN .\Objects\task_switch.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE .\Objects\task_switch.src PR(.\Listings\task_switch.ls1) EP DEBUG

LOC  OBJ            LINE     SOURCE

                       1     ; .\Objects\task_switch.SRC generated from: task_switch.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        C:\Keil\C51\BIN\C51.EXE task_switch.c BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\t
                             ask_switch.lst) SRC(.\Objects\task_switch.SRC)
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    TASK_SWITCH
                       8     
  0093                 9     P0M1    DATA    093H
  0092                10     P1M0    DATA    092H
  0096                11     P2M0    DATA    096H
  0091                12     P1M1    DATA    091H
  0080                13     P0      DATA    080H
  00B2                14     P3M0    DATA    0B2H
  0095                15     P2M1    DATA    095H
  0090                16     P1      DATA    090H
  00B4                17     P4M0    DATA    0B4H
  00B1                18     P3M1    DATA    0B1H
  00A0                19     P2      DATA    0A0H
  00CA                20     P5M0    DATA    0CAH
  00B3                21     P4M1    DATA    0B3H
  00B0                22     P3      DATA    0B0H
  00AB                23     WKTCH   DATA    0ABH
  00D6                24     AC      BIT     0D0H.6
  00CC                25     P6M0    DATA    0CCH
  00C9                26     P5M1    DATA    0C9H
  00C0                27     P4      DATA    0C0H
  00E2                28     P7M0    DATA    0E2H
  00CB                29     P6M1    DATA    0CBH
  00C8                30     P5      DATA    0C8H
  00E8                31     P6      DATA    0E8H
  00E1                32     P7M1    DATA    0E1H
  00AF                33     EA      BIT     0A8H.7
  00F8                34     P7      DATA    0F8H
  00AA                35     WKTCL   DATA    0AAH
  00CE                36     SPCTL   DATA    0CEH
  00A2                37     P_SW1   DATA    0A2H
  00BA                38     P_SW2   DATA    0BAH
  00E5                39     DPH1    DATA    0E5H
  00AD                40     EADC    BIT     0A8H.5
  00A8                41     IE      DATA    0A8H
  00C5                42     IAP_CMD DATA    0C5H
  00E4                43     DPL1    DATA    0E4H
  00BD                44     ADC_RES DATA    0BDH
  00B6                45     IP2H    DATA    0B6H
  00EE                46     IP3H    DATA    0EEH
  00AE                47     TA      DATA    0AEH
  008F                48     INTCLKO DATA    08FH
  00AC                49     ES      BIT     0A8H.4
  00BD                50     PADC    BIT     0B8H.5
  00B8                51     IP      DATA    0B8H
  00DE                52     ADCCFG  DATA    0DEH
  0098                53     RI      BIT     098H.0
  00D7                54     CY      BIT     0D0H.7
  0099                55     TI      BIT     098H.1
  00C3                56     IAP_ADDRH       DATA    0C3H
  00BC                57     PS      BIT     0B8H.4
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     2

  0081                58     SP      DATA    081H
  00C4                59     IAP_ADDRL       DATA    0C4H
  00D2                60     OV      BIT     0D0H.2
  00BF                61     PPCA    BIT     0B8H.7
  009E                62     LIRTRIM DATA    09EH
  00E6                63     CMPCR1  DATA    0E6H
  00E7                64     CMPCR2  DATA    0E7H
  00AE                65     ELVD    BIT     0A8H.6
  0080                66     P00     BIT     080H.0
  00BC                67     ADC_CONTR       DATA    0BCH
  0099                68     SBUF    DATA    099H
  0090                69     P10     BIT     090H.0
  0087                70     PCON    DATA    087H
  0081                71     P01     BIT     080H.1
  00A0                72     P20     BIT     0A0H.0
  0091                73     P11     BIT     090H.1
  0082                74     P02     BIT     080H.2
  00F5                75     IAP_TPS DATA    0F5H
  00B0                76     P30     BIT     0B0H.0
  00A1                77     P21     BIT     0A0H.1
  0092                78     P12     BIT     090H.2
  0083                79     P03     BIT     080H.3
  00C0                80     P40     BIT     0C0H.0
  00B1                81     P31     BIT     0B0H.1
  00A2                82     P22     BIT     0A0H.2
  0098                83     SCON    DATA    098H
  0093                84     P13     BIT     090H.3
  0084                85     P04     BIT     080H.4
  00C8                86     P50     BIT     0C8H.0
  00C1                87     P41     BIT     0C0H.1
  00B2                88     P32     BIT     0B0H.2
  00A3                89     P23     BIT     0A0H.3
  0094                90     P14     BIT     090H.4
  0089                91     TMOD    DATA    089H
  0088                92     TCON    DATA    088H
  0085                93     P05     BIT     080H.5
  00C9                94     P51     BIT     0C8H.1
  00C2                95     P42     BIT     0C0H.2
  00B3                96     P33     BIT     0B0H.3
  00A4                97     P24     BIT     0A0H.4
  0095                98     P15     BIT     090H.5
  0086                99     P06     BIT     080H.6
  00CA               100     P52     BIT     0C8H.2
  00C3               101     P43     BIT     0C0H.3
  00BE               102     PLVD    BIT     0B8H.6
  00B4               103     P34     BIT     0B0H.4
  00A5               104     P25     BIT     0A0H.5
  0096               105     P16     BIT     090H.6
  0087               106     P07     BIT     080H.7
  00CB               107     P53     BIT     0C8H.3
  00C4               108     P44     BIT     0C0H.4
  00B5               109     P35     BIT     0B0H.5
  00A6               110     P26     BIT     0A0H.6
  0097               111     P17     BIT     090H.7
  00CC               112     P54     BIT     0C8H.4
  00C5               113     P45     BIT     0C0H.5
  00B6               114     P36     BIT     0B0H.6
  00A7               115     P27     BIT     0A0H.7
  00C6               116     P46     BIT     0C0H.6
  00B7               117     P37     BIT     0B0H.7
  00C7               118     P47     BIT     0C0H.7
  0089               119     IE0     BIT     088H.1
  008B               120     IE1     BIT     088H.3
  00AF               121     IE2     DATA    0AFH
  00F0               122     B       DATA    0F0H
  008E               123     AUXR    DATA    08EH
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     3

  00FC               124     USBADR  DATA    0FCH
  00C7               125     IAP_CONTR       DATA    0C7H
  00EC               126     USBDAT  DATA    0ECH
  00DC               127     USBCLK  DATA    0DCH
  00E0               128     ACC     DATA    0E0H
  00A9               129     ET0     BIT     0A8H.1
  00AB               130     ET1     BIT     0A8H.3
  008D               131     TF0     BIT     088H.5
  00FF               132     RSTCFG  DATA    0FFH
  00B5               133     IP2     DATA    0B5H
  008F               134     TF1     BIT     088H.7
  00F4               135     USBCON  DATA    0F4H
  00DF               136     IP3     DATA    0DFH
  009A               137     RB8     BIT     098H.2
  008C               138     TH0     DATA    08CH
  00A8               139     EX0     BIT     0A8H.0
  008D               140     TH1     DATA    08DH
  0088               141     IT0     BIT     088H.0
  00D6               142     T2H     DATA    0D6H
  00AA               143     EX1     BIT     0A8H.2
  009B               144     TB8     BIT     098H.3
  008A               145     IT1     BIT     088H.2
  00D4               146     T3H     DATA    0D4H
  00D0               147     P       BIT     0D0H.0
  00D2               148     T4H     DATA    0D2H
  009F               149     SM0     BIT     098H.7
  008A               150     TL0     DATA    08AH
  009E               151     SM1     BIT     098H.6
  008B               152     TL1     DATA    08BH
  00D7               153     T2L     DATA    0D7H
  009D               154     SM2     BIT     098H.5
  00D5               155     T3L     DATA    0D5H
  00D3               156     T4L     DATA    0D3H
  00B9               157     PT0     BIT     0B8H.1
  00D3               158     RS0     BIT     0D0H.3
  00BB               159     PT1     BIT     0B8H.3
  00D4               160     RS1     BIT     0D0H.4
  00C2               161     IAP_DATA        DATA    0C2H
  008C               162     TR0     BIT     088H.4
  008E               163     TR1     BIT     088H.6
  00C1               164     WDT_CONTR       DATA    0C1H
  00B8               165     PX0     BIT     0B8H.0
  00BA               166     PX1     BIT     0B8H.2
  009F               167     IRTRIM  DATA    09FH
  0083               168     DPH     DATA    083H
  00D1               169     T4T3M   DATA    0D1H
  00BE               170     ADC_RESL        DATA    0BEH
  0082               171     DPL     DATA    082H
  00CD               172     SPSTAT  DATA    0CDH
  00B7               173     IPH     DATA    0B7H
  009B               174     S2BUF   DATA    09BH
  00AD               175     S3BUF   DATA    0ADH
  009C               176     REN     BIT     098H.4
  0085               177     S4BUF   DATA    085H
  009A               178     S2CON   DATA    09AH
  00E3               179     DPS     DATA    0E3H
  00AC               180     S3CON   DATA    0ACH
  0084               181     S4CON   DATA    084H
  00EF               182     AUXINTIF        DATA    0EFH
  00B9               183     SADEN   DATA    0B9H
  00A9               184     SADDR   DATA    0A9H
  00C6               185     IAP_TRIG        DATA    0C6H
  00D5               186     F0      BIT     0D0H.5
  009D               187     IRCBAND DATA    09DH
  00D0               188     PSW     DATA    0D0H
  00CF               189     SPDAT   DATA    0CFH
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     4

  0094               190     P0M0    DATA    094H
                     191     ?PR?os_cpu_sr_save?TASK_SWITCH           SEGMENT CODE 
                     192     ?PR?_os_cpu_sr_restore?TASK_SWITCH       SEGMENT CODE 
                     193     ?PR?_os_tesk_stack_init?TASK_SWITCH      SEGMENT CODE 
                     194     ?DT?_os_tesk_stack_init?TASK_SWITCH      SEGMENT DATA OVERLAYABLE 
                     195     ?PR?_os_delay?TASK_SWITCH                SEGMENT CODE 
                     196     ?DT?_os_delay?TASK_SWITCH                SEGMENT DATA OVERLAYABLE 
                     197     ?PR?os_time_tick?TASK_SWITCH             SEGMENT CODE 
                     198     ?PR?timer0_isr?TASK_SWITCH               SEGMENT CODE 
                     199     ?DT?timer0_isr?TASK_SWITCH               SEGMENT DATA OVERLAYABLE 
                     200             EXTRN   DATA (os_task_running_id)
                     201             EXTRN   CODE (os_int_enter)
                     202             EXTRN   DATA (os_map_tab)
                     203             EXTRN   DATA (os_int_count)
                     204             EXTRN   CODE (os_int_exit)
                     205             EXTRN   DATA (os_task_rdy_tab)
                     206             EXTRN   BIT (os_running)
                     207             EXTRN   IDATA (os_tcb)
                     208             PUBLIC  timer0_isr
                     209             PUBLIC  os_time_tick
                     210             PUBLIC  _os_delay
                     211             PUBLIC  _os_tesk_stack_init
                     212             PUBLIC  _os_cpu_sr_restore
                     213             PUBLIC  os_cpu_sr_save
                     214     
----                 215             RSEG  ?DT?timer0_isr?TASK_SWITCH
0000                 216     ?timer0_isr?BYTE:
0000                 217          cpu_sr?547:   DS   1
                     218     
----                 219             RSEG  ?DT?_os_tesk_stack_init?TASK_SWITCH
0000                 220     ?_os_tesk_stack_init?BYTE:
0000                 221            r_sp?242:   DS   1
                     222     
----                 223             RSEG  ?DT?_os_delay?TASK_SWITCH
0000                 224     ?_os_delay?BYTE:
0000                 225           tisks?343:   DS   1
                     226     ; #include "task_switch.h"
                     227     ; #include "reg51.h"
                     228     ; #include "core.h"
                     229     ; 
                     230     ; 
                     231     ; /* ½øÈëÁÙ½ç¶Î */
                     232     ; char os_cpu_sr_save(void)
                     233     
----                 234             RSEG  ?PR?os_cpu_sr_save?TASK_SWITCH
0000                 235     os_cpu_sr_save:
                     236             USING   0
                     237                             ; SOURCE LINE # 7
                     238     ; {
                     239                             ; SOURCE LINE # 8
                     240     ;       __asm mov r7,IE         //µÃµ½ ¡¸IE¡¹ÖÐ¶Ï¿ØÖÆ¼Ä´æÆ÷Öµ
0000 AFA8            241              mov r7,IE               
                     242     ;       __asm mov IE,#0
0002 75A800          243              mov IE,#0
                     244     ;       __asm ret                       //·µ»ØÖµÊÇÔÚr7ÖÐ
0005 22              245              ret                     
                     246     ;       return 0;                       //·µ»ØÕâÌõÖ¸ÁîÊµ¼Ê²»»á±»Ö´ÐÐµ½,µ«ÒòÎªÕâ¸öº¯ÊÈ·ÊµÒª·
                             µ»ØÖµ,ËùÒÔÐ´Ò»ÏÂ(²»È»»áÓÐ¾¯¸æ)
                     247                             ; SOURCE LINE # 12
0006 7F00            248             MOV     R7,#00H
                     249     ; }
                     250                             ; SOURCE LINE # 13
0008                 251     ?C0001:
0008 22              252             RET     
                     253     ; END OF os_cpu_sr_save
                     254     
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     5

                     255     ; 
                     256     ; 
                     257     ; /* ÍË³öÁÙ½ç¶Î */
                     258     ; void os_cpu_sr_restore(char cpu_sr)
                     259     
----                 260             RSEG  ?PR?_os_cpu_sr_restore?TASK_SWITCH
0000                 261     _os_cpu_sr_restore:
                     262             USING   0
                     263                             ; SOURCE LINE # 17
                     264     ;---- Variable 'cpu_sr?140' assigned to Register 'R7' ----
                     265     ; {
                     266                             ; SOURCE LINE # 18
                     267     ;       cpu_sr = cpu_sr;        //µÚÒ»¸ö²ÎÊ(charÀàÐÍ)ÊÇ´æÔÚr7ÀïÃæµÄ,
                     268                             ; SOURCE LINE # 19
                     269     ;       __asm mov IE,r7         //»Ö¸´ÖÐ¶Ï¿ØÖÆ¼Ä´æÆ÷Öµ
0000 8FA8            270              mov IE,r7               
                     271     ;       __asm ret                       //Ò²¿ÉÒÔÃ»ÓÐ(º¯Ê»áÓÐret)
0002 22              272              ret                     
                     273     ; }
                     274                             ; SOURCE LINE # 22
0003 22              275             RET     
                     276     ; END OF _os_cpu_sr_restore
                     277     
                     278     ; 
                     279     ; 
                     280     ; 
                     281     ; /* ÈÎÎñ¶ÑÕ»³õÊ¼»¯ */
                     282     ; unsigned char os_tesk_stack_init(unsigned char stack_point)
                     283     
----                 284             RSEG  ?PR?_os_tesk_stack_init?TASK_SWITCH
0000                 285     _os_tesk_stack_init:
                     286             USING   0
                     287                             ; SOURCE LINE # 27
                     288     ;---- Variable 'stack_point?241' assigned to Register 'R7' ----
                     289     ; {
                     290                             ; SOURCE LINE # 28
                     291     ;       unsigned char r_sp = SP;
                     292                             ; SOURCE LINE # 29
0000 858100   F      293             MOV     r_sp?242,SP
                     294     ;       SP = stack_point;       //¼Ä´æÆ÷ÈëÕ»(ÔÚ´ËÖ®Ç°²»ÄÜÓÐÈÎºÎÔËËã²Ù×÷,²»È»»á¸Ä±ä¼Ä´æÆ÷Öµ)
                     295                             ; SOURCE LINE # 30
0003 8F81            296             MOV     SP,R7
                     297     ;       __asm PUSH ACC          //ÀÛ¼ÓÆ÷        
0005 C0E0            298              PUSH ACC                
                     299     ;       __asm PUSH B            //ÓÃÓÚ³Ë³µÄ¼Ä´æÆ÷
0007 C0F0            300              PUSH B          
                     301     ;       __asm PUSH DPH          //Ê¾ÝÖ¸Õë£¬ÓÃÍ¾´ó
0009 C083            302              PUSH DPH                
                     303     ;       __asm PUSH DPL          //Ê¾ÝÖ¸Õë£¬ÓÃÍ¾´ó
000B C082            304              PUSH DPL                
                     305     ;       __asm PUSH PSW          //±êÖ¾Î»¼Ä´æÆ÷
000D C0D0            306              PUSH PSW                
                     307     ;       __asm PUSH 0
000F C000            308              PUSH 0
                     309     ;       __asm PUSH 1
0011 C001            310              PUSH 1
                     311     ;       __asm PUSH 2
0013 C002            312              PUSH 2
                     313     ;       __asm PUSH 3
0015 C003            314              PUSH 3
                     315     ;       __asm PUSH 4
0017 C004            316              PUSH 4
                     317     ;       __asm PUSH 5
0019 C005            318              PUSH 5
                     319     ;       __asm PUSH 6
001B C006            320              PUSH 6
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     6

                     321     ;       __asm PUSH 7
001D C007            322              PUSH 7
                     323     ; 
                     324     ;       stack_point = SP;
                     325                             ; SOURCE LINE # 45
001F AF81            326             MOV     R7,SP
                     327     ;       SP = r_sp;
                     328                             ; SOURCE LINE # 46
0021 850081   F      329             MOV     SP,r_sp?242
                     330     ; 
                     331     ;       return stack_point;
                     332                             ; SOURCE LINE # 48
                     333     ; }
                     334                             ; SOURCE LINE # 49
0024                 335     ?C0003:
0024 22              336             RET     
                     337     ; END OF _os_tesk_stack_init
                     338     
                     339     ; 
                     340     ; 
                     341     ; /*ÒòÎªÃ»ÓÐ¶ÔPCÖ±½Ó²Ù×÷µÄÖ¸Áî,µ«ÖÐ¶Ï¹³ÌºÍ¹³Ìµ÷ÓÃ¿ÉÒÔÊ¹PCÈëÕ»,
                     342     ; ÖÐ¶Ï·µ»Ø,¹³Ì·µ»Ø¿ÉÒÔ,Ê¹PC³öÕ»,¿ÉÒÔ¼ä½ÓµÄÀûÓÃ´Ë·½·¨¶ÔPC²Ù×÷*/
                     343     ; 
                     344     ; /* ÏµÍ³ÑÓÊ± */
                     345     ; void os_delay(unsigned char tisks)
                     346     
----                 347             RSEG  ?PR?_os_delay?TASK_SWITCH
0000                 348     _os_delay:
                     349             USING   0
                     350                             ; SOURCE LINE # 56
0000 8F00     F      351             MOV     tisks?343,R7
                     352     ; {
                     353                             ; SOURCE LINE # 57
                     354     ;       unsigned char i;
                     355     ; 
                     356     ;       if(tisks > 0)
                     357                             ; SOURCE LINE # 60
0002 E500     F      358             MOV     A,tisks?343
0004 D3              359             SETB    C
0005 9400            360             SUBB    A,#00H
0007 5003            361             JNC     $ + 5H
0009 020000   F      362             LJMP    ?C0010
                     363     ;       {
                     364                             ; SOURCE LINE # 61
                     365     ;               EA = 0;                                         //Ö±½Ó²Ù×÷,¶ø²»ÓÃÁÙ½ç¶ÎµÄ·½
                             ·¨Ö÷ÒªÊÇÎªÁËÈÎÎñÇÐ»»¸ü¿ì
                     366                             ; SOURCE LINE # 62
000C C2AF            367             CLR     EA
                     368     ;               /*Ñ¹Õ»*/
                     369     ;               __asm PUSH ACC                          //¼Ä´æÆ÷ÈëÕ»(ÔÚ´ËÖ®Ç°²»ÄÜÓÐÈÎºÎÔËËã
                             ²Ù×÷,²»È»»á¸Ä±ä¼Ä´æÆ÷Öµ)
000E C0E0            370              PUSH ACC                                
                     371     ;               __asm PUSH B
0010 C0F0            372              PUSH B
                     373     ;               __asm PUSH DPH
0012 C083            374              PUSH DPH
                     375     ;               __asm PUSH DPL
0014 C082            376              PUSH DPL
                     377     ;               __asm PUSH PSW
0016 C0D0            378              PUSH PSW
                     379     ;               __asm PUSH 0
0018 C000            380              PUSH 0
                     381     ;               __asm PUSH 1
001A C001            382              PUSH 1
                     383     ;               __asm PUSH 2
001C C002            384              PUSH 2
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     7

                     385     ;               __asm PUSH 3
001E C003            386              PUSH 3
                     387     ;               __asm PUSH 4
0020 C004            388              PUSH 4
                     389     ;               __asm PUSH 5
0022 C005            390              PUSH 5
                     391     ;               __asm PUSH 6
0024 C006            392              PUSH 6
                     393     ;               __asm PUSH 7
0026 C007            394              PUSH 7
                     395     ;               os_tcb[os_task_running_id].os_task_stcak_top = SP;
                     396                             ; SOURCE LINE # 77
0028 AF00     F      397             MOV     R7,os_task_running_id
002A EF              398             MOV     A,R7
002B 25E0            399             ADD     A,ACC
002D 25E0            400             ADD     A,ACC
002F 2400     F      401             ADD     A,#LOW (os_tcb+01H)
0031 F8              402             MOV     R0,A
0032 A681            403             MOV     @R0,SP
                     404     ;               os_tcb[os_task_running_id].os_tsak_wait_tick = tisks;   //ÑÓÊ±Ê±¼ä
                     405                             ; SOURCE LINE # 78
0034 AF00     F      406             MOV     R7,os_task_running_id
0036 EF              407             MOV     A,R7
0037 25E0            408             ADD     A,ACC
0039 25E0            409             ADD     A,ACC
003B 2400     F      410             ADD     A,#LOW (os_tcb)
003D F8              411             MOV     R0,A
003E A600     F      412             MOV     @R0,tisks?343
                     413     ;               os_tcb[os_task_running_id].suspend = 1;                                 //Ò
                             òÎªÓÐÑÓÊ±,ËùÒÔÏÈ¹ÒÆð±¾ÈÎÎñ
                     414                             ; SOURCE LINE # 79
0040 AF00     F      415             MOV     R7,os_task_running_id
0042 EF              416             MOV     A,R7
0043 25E0            417             ADD     A,ACC
0045 25E0            418             ADD     A,ACC
0047 2400     F      419             ADD     A,#LOW (os_tcb+03H)
0049 F8              420             MOV     R0,A
004A 7601            421             MOV     @R0,#01H
                     422     ;               for(i=0; i<MAX_TASK; i++)                                                  
                                          //ÕÒµ½ÒÑ¾­¾ÍÐ÷,Î´±»¹ÒÆð,ÇÒÓÅÏÈ¼¶×î¸ßµÄÈÎÎñ
                     423                             ; SOURCE LINE # 80
                     424     ;---- Variable 'i?344' assigned to Register 'R7' ----
004C E4              425             CLR     A
004D FF              426             MOV     R7,A
004E                 427     ?C0005:
                     428     ;               {
                     429                             ; SOURCE LINE # 81
                     430     ;                       if(os_task_rdy_tab & os_map_tab[i])
                     431                             ; SOURCE LINE # 82
004E 7400     F      432             MOV     A,#LOW (os_map_tab)
0050 2F              433             ADD     A,R7
0051 F8              434             MOV     R0,A
0052 E6              435             MOV     A,@R0
0053 5500     F      436             ANL     A,os_task_rdy_tab
0055 600B            437             JZ      ?C0007
                     438     ;                       {
                     439                             ; SOURCE LINE # 83
                     440     ;                               if(0 == os_tcb[i].suspend)
                     441                             ; SOURCE LINE # 84
0057 EF              442             MOV     A,R7
0058 25E0            443             ADD     A,ACC
005A 25E0            444             ADD     A,ACC
005C 2400     F      445             ADD     A,#LOW (os_tcb+03H)
005E F8              446             MOV     R0,A
005F E6              447             MOV     A,@R0
0060 6004            448             JZ      ?C0006
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     8

                     449     ;                               {
                     450                             ; SOURCE LINE # 85
                     451     ;                                       break;
                     452                             ; SOURCE LINE # 86
                     453     ;                               }
                     454                             ; SOURCE LINE # 87
0062                 455     ?C0009:
                     456     ;                       }
                     457                             ; SOURCE LINE # 88
                     458     ;               }
                     459                             ; SOURCE LINE # 89
0062                 460     ?C0007:
0062 0F              461             INC     R7
0063 BF03E8          462             CJNE    R7,#03H,?C0005
0066                 463     ?C0006:
                     464     ;               os_task_running_id = i;                                                    
                                  //¿ÉÖ´ÐÐµÄ×î¸ßÓÅÏÈ¼¶ÈÎÎñ
                     465                             ; SOURCE LINE # 90
0066 8F00     F      466             MOV     os_task_running_id,R7
                     467     ; 
                     468     ;               SP = os_tcb[os_task_running_id].os_task_stcak_top;      //×î¸ßÓÅÏÈ¼¶ÈÎÎñµÄÕ
                             »¶¥
                     469                             ; SOURCE LINE # 92
0068 AF00     F      470             MOV     R7,os_task_running_id
006A EF              471             MOV     A,R7
006B 25E0            472             ADD     A,ACC
006D 25E0            473             ADD     A,ACC
006F 2400     F      474             ADD     A,#LOW (os_tcb+01H)
0071 F8              475             MOV     R0,A
0072 E6              476             MOV     A,@R0
0073 F581            477             MOV     SP,A
                     478     ;               /*³öÕ»*/
                     479     ;               __asm POP 7
0075 D007            480              POP 7
                     481     ;               __asm POP 6
0077 D006            482              POP 6
                     483     ;               __asm POP 5
0079 D005            484              POP 5
                     485     ;               __asm POP 4
007B D004            486              POP 4
                     487     ;               __asm POP 3
007D D003            488              POP 3
                     489     ;               __asm POP 2
007F D002            490              POP 2
                     491     ;               __asm POP 1
0081 D001            492              POP 1
                     493     ;               __asm POP 0
0083 D000            494              POP 0
                     495     ;               __asm POP PSW
0085 D0D0            496              POP PSW
                     497     ;               __asm POP DPL
0087 D082            498              POP DPL
                     499     ;               __asm POP DPH
0089 D083            500              POP DPH
                     501     ;               __asm POP B
008B D0F0            502              POP B
                     503     ;               __asm POP ACC
008D D0E0            504              POP ACC
                     505     ;               EA = 1;
                     506                             ; SOURCE LINE # 107
008F D2AF            507             SETB    EA
                     508     ;       }
                     509                             ; SOURCE LINE # 108
                     510     ; }
                     511                             ; SOURCE LINE # 109
0091                 512     ?C0010:
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE     9

0091 22              513             RET     
                     514     ; END OF _os_delay
                     515     
                     516     ; 
                     517     ; /* ÏµÍ³ÐÄÌø¸üÐÂ */
                     518     ; void os_time_tick(void)
                     519     
----                 520             RSEG  ?PR?os_time_tick?TASK_SWITCH
0000                 521     os_time_tick:
                     522             USING   0
                     523                             ; SOURCE LINE # 112
                     524     ; {
                     525                             ; SOURCE LINE # 113
                     526     ;       unsigned char i;
                     527     ;       
                     528     ;       for(i=0; i<MAX_TASK; i++)
                     529                             ; SOURCE LINE # 116
                     530     ;---- Variable 'i?445' assigned to Register 'R7' ----
0000 E4              531             CLR     A
0001 FF              532             MOV     R7,A
0002                 533     ?C0011:
                     534     ;       {
                     535                             ; SOURCE LINE # 117
                     536     ;               if(os_tcb[i].os_tsak_wait_tick)
                     537                             ; SOURCE LINE # 118
0002 EF              538             MOV     A,R7
0003 25E0            539             ADD     A,ACC
0005 25E0            540             ADD     A,ACC
0007 2400     F      541             ADD     A,#LOW (os_tcb)
0009 F8              542             MOV     R0,A
000A E6              543             MOV     A,@R0
000B 601E            544             JZ      ?C0013
                     545     ;               {
                     546                             ; SOURCE LINE # 119
                     547     ;                       os_tcb[i].os_tsak_wait_tick--;
                     548                             ; SOURCE LINE # 120
000D EF              549             MOV     A,R7
000E 25E0            550             ADD     A,ACC
0010 25E0            551             ADD     A,ACC
0012 2400     F      552             ADD     A,#LOW (os_tcb)
0014 F8              553             MOV     R0,A
0015 16              554             DEC     @R0
                     555     ;                       /*Ã»ÓÐµÈ´Ê±¼ä,ÔòÈÎÎñ½øÈë¾ÍÐ÷×´Ì¬*/
                     556     ;                       if(0 == os_tcb[i].os_tsak_wait_tick)
                     557                             ; SOURCE LINE # 122
0016 EF              558             MOV     A,R7
0017 25E0            559             ADD     A,ACC
0019 25E0            560             ADD     A,ACC
001B 2400     F      561             ADD     A,#LOW (os_tcb)
001D F8              562             MOV     R0,A
001E E6              563             MOV     A,@R0
001F 700A            564             JNZ     ?C0013
                     565     ;                       {
                     566                             ; SOURCE LINE # 123
                     567     ;                               os_tcb[i].suspend = 0;
                     568                             ; SOURCE LINE # 124
0021 EF              569             MOV     A,R7
0022 25E0            570             ADD     A,ACC
0024 25E0            571             ADD     A,ACC
0026 2400     F      572             ADD     A,#LOW (os_tcb+03H)
0028 F8              573             MOV     R0,A
0029 E4              574             CLR     A
002A F6              575             MOV     @R0,A
                     576     ;                       }
                     577                             ; SOURCE LINE # 125
                     578     ;               }
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    10

                     579                             ; SOURCE LINE # 126
                     580     ;       }
                     581                             ; SOURCE LINE # 127
002B                 582     ?C0013:
002B 0F              583             INC     R7
002C BF03D3          584             CJNE    R7,#03H,?C0011
                     585     ; }
                     586                             ; SOURCE LINE # 128
002F                 587     ?C0016:
002F 22              588             RET     
                     589     ; END OF os_time_tick
                     590     
----                 591     CSEG    AT      0000BH
000B 020000   F      592             LJMP    timer0_isr
                     593     
                     594     ; 
                     595     ; /* 
                     596     ; ÈÎÎñÇÐ»»ÐÄÌø 5ms
                     597     ; interrupt 1ÊÇ¶¨Ê±Æ÷ÖÐ¶Ï 
                     598     ; using 0 Ä¬ÈÏÓÃ,ËùÓÐµÄ¼Ä´æÆ÷»á×Ô¶¯ÈëÕ»
                     599     ; ÓÃusing 1 2 3 ÔòÐèÒªÊÖ¶¯¶Ôr0-r7ÈëÕ»,³öÕ»(Çë²é¿´¼Ä´æÆ÷×éÑ¡Ôñ(¿´ÈÎÒâÒ»±¾½²51µÄÊé))
                     600     ; */
                     601     ; void timer0_isr(void) interrupt 1
                     602     
----                 603             RSEG  ?PR?timer0_isr?TASK_SWITCH
                     604             USING   0
0000                 605     timer0_isr:
0000 C0E0            606             PUSH    ACC
0002 C0F0            607             PUSH    B
0004 C083            608             PUSH    DPH
0006 C082            609             PUSH    DPL
0008 C0D0            610             PUSH    PSW
000A 75D000          611             MOV     PSW,#00H
000D C000            612             PUSH    AR0
000F C001            613             PUSH    AR1
0011 C002            614             PUSH    AR2
0013 C003            615             PUSH    AR3
0015 C004            616             PUSH    AR4
0017 C005            617             PUSH    AR5
0019 C006            618             PUSH    AR6
001B C007            619             PUSH    AR7
                     620             USING   0
                     621                             ; SOURCE LINE # 136
                     622     ; {
                     623     ;       unsigned char i;
                     624     ;       char cpu_sr;
                     625     ; 
                     626     ;       if(os_true == os_running)
                     627                             ; SOURCE LINE # 141
001D 30005B   F      628             JNB     os_running,?C0025
                     629     ;       {
                     630                             ; SOURCE LINE # 142
                     631     ;               os_enter_critical();
                     632                             ; SOURCE LINE # 143
0020 120000   F      633             LCALL   os_cpu_sr_save
0023 8F00     F      634             MOV     cpu_sr?547,R7
                     635     ;               os_int_enter();
                     636                             ; SOURCE LINE # 144
0025 120000   F      637             LCALL   os_int_enter
                     638     ;               
                     639     ;               os_time_tick();
                     640                             ; SOURCE LINE # 146
0028 120000   F      641             LCALL   os_time_tick
                     642     ;               /*µ±È»,51µ¥Æ¬»ú×î¶àÖ»ÄÜÓÐÒ»´ÎÖÐ¶ÏÇ¶Ì×,os_int_count×î´óÎª2(+±¾´Î)*/
                     643     ;               if(1 == os_int_count)
                     644                             ; SOURCE LINE # 148
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    11

002B E500     F      645             MOV     A,os_int_count
002D 6401            646             XRL     A,#01H
002F 703A            647             JNZ     ?C0018
                     648     ;               {
                     649                             ; SOURCE LINE # 149
                     650     ;                       os_tcb[os_task_running_id].os_task_stcak_top = SP;      
                     651                             ; SOURCE LINE # 150
0031 AF00     F      652             MOV     R7,os_task_running_id
0033 EF              653             MOV     A,R7
0034 25E0            654             ADD     A,ACC
0036 25E0            655             ADD     A,ACC
0038 2400     F      656             ADD     A,#LOW (os_tcb+01H)
003A F8              657             MOV     R0,A
003B A681            658             MOV     @R0,SP
                     659     ;                       /*ÕÒµ½ÒÑ¾­¾ÍÐ÷,Î´±»¹ÒÆð,ÇÒÓÅÏÈ¼¶×î¸ßµÄÈÎÎñ(ÈÎÎñµ÷¶ÈÆ÷)*/
                     660     ;                       for(i=0; i<MAX_TASK; i++)
                     661                             ; SOURCE LINE # 152
                     662     ;---- Variable 'i?546' assigned to Register 'R7' ----
003D E4              663             CLR     A
003E FF              664             MOV     R7,A
003F                 665     ?C0019:
                     666     ;                       {
                     667                             ; SOURCE LINE # 153
                     668     ;                               if(os_task_rdy_tab & os_map_tab[i])
                     669                             ; SOURCE LINE # 154
003F 7400     F      670             MOV     A,#LOW (os_map_tab)
0041 2F              671             ADD     A,R7
0042 F8              672             MOV     R0,A
0043 E6              673             MOV     A,@R0
0044 5500     F      674             ANL     A,os_task_rdy_tab
0046 600B            675             JZ      ?C0021
                     676     ;                               {
                     677                             ; SOURCE LINE # 155
                     678     ;                                       /*ÓÃsuspend ÅÐ¶ÏÐÝÃßÊ±¼äÒÑ¾­µ½£¬¿ÉÒÔÖ´ÐÐÈÎÎñ²¿·Ö*/
                     679     ;                                       if(0 == os_tcb[i].suspend)
                     680                             ; SOURCE LINE # 157
0048 EF              681             MOV     A,R7
0049 25E0            682             ADD     A,ACC
004B 25E0            683             ADD     A,ACC
004D 2400     F      684             ADD     A,#LOW (os_tcb+03H)
004F F8              685             MOV     R0,A
0050 E6              686             MOV     A,@R0
0051 6004            687             JZ      ?C0020
                     688     ;                                       {
                     689                             ; SOURCE LINE # 158
                     690     ;                                               break;
                     691                             ; SOURCE LINE # 159
                     692     ;                                       }
                     693                             ; SOURCE LINE # 160
0053                 694     ?C0023:
                     695     ;                               }
                     696                             ; SOURCE LINE # 161
                     697     ;                       }
                     698                             ; SOURCE LINE # 162
0053                 699     ?C0021:
0053 0F              700             INC     R7
0054 BF03E8          701             CJNE    R7,#03H,?C0019
0057                 702     ?C0020:
                     703     ;                       /*ÏÖÔÚÖ´ÐÐµÄÈÎÎñ¾ÍÊÇÓÅÏÈ¼¶×î¸ßµÄ,ËùÒÔ²»ÐèÒªÈÎÎñÇÐ»»*/
                     704     ;                       if(os_task_running_id != i)
                     705                             ; SOURCE LINE # 164
0057 E500     F      706             MOV     A,os_task_running_id
0059 6F              707             XRL     A,R7
005A 600F            708             JZ      ?C0018
                     709     ;                       {
                     710                             ; SOURCE LINE # 165
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    12

                     711     ;                               /*¿ÉÖ´ÐÐµÄ×î¸ßÓÅÏÈ¼¶ÈÎÎñ*/
                     712     ;                               os_task_running_id = i;
                     713                             ; SOURCE LINE # 167
005C 8F00     F      714             MOV     os_task_running_id,R7
                     715     ;                               /*×î¸ßÓÅÏÈ¼¶ÈÎÎñµÄÕ»¶¥*/
                     716     ;                               /*SPÊÇ¶ÑÕ»Ö¸Õë£¬Ö¸ÏòÕ»¶¥*/
                     717     ;                               SP = os_tcb[os_task_running_id].os_task_stcak_top;
                     718                             ; SOURCE LINE # 170
005E AF00     F      719             MOV     R7,os_task_running_id
0060 EF              720             MOV     A,R7
0061 25E0            721             ADD     A,ACC
0063 25E0            722             ADD     A,ACC
0065 2400     F      723             ADD     A,#LOW (os_tcb+01H)
0067 F8              724             MOV     R0,A
0068 E6              725             MOV     A,@R0
0069 F581            726             MOV     SP,A
                     727     ;                       }
                     728                             ; SOURCE LINE # 171
                     729     ;               }
                     730                             ; SOURCE LINE # 172
006B                 731     ?C0018:
                     732     ;               /*Çå³ÖÐ¶Ï±êÖ¾*/
                     733     ;               TF0 = 0;
                     734                             ; SOURCE LINE # 174
006B C28D            735             CLR     TF0
                     736     ;               /*Ê±¼äÖØ×°ÔØ*/
                     737     ;               TH0 = 0xee;
                     738                             ; SOURCE LINE # 176
006D 758CEE          739             MOV     TH0,#0EEH
                     740     ;               TL0 = 0x00;
                     741                             ; SOURCE LINE # 177
0070 758A00          742             MOV     TL0,#00H
                     743     ;               os_int_exit();
                     744                             ; SOURCE LINE # 178
0073 120000   F      745             LCALL   os_int_exit
                     746     ;               os_exit_critical();
                     747                             ; SOURCE LINE # 179
0076 AF00     F      748             MOV     R7,cpu_sr?547
0078 120000   F      749             LCALL   _os_cpu_sr_restore
                     750     ;       }
                     751                             ; SOURCE LINE # 180
                     752     ;       
                     753     ; }
                     754                             ; SOURCE LINE # 182
007B                 755     ?C0025:
007B D007            756             POP     AR7
007D D006            757             POP     AR6
007F D005            758             POP     AR5
0081 D004            759             POP     AR4
0083 D003            760             POP     AR3
0085 D002            761             POP     AR2
0087 D001            762             POP     AR1
0089 D000            763             POP     AR0
008B D0D0            764             POP     PSW
008D D082            765             POP     DPL
008F D083            766             POP     DPH
0091 D0F0            767             POP     B
0093 D0E0            768             POP     ACC
0095 32              769             RETI    
                     770     ; END OF timer0_isr
                     771     
                     772             END
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    13

SYMBOL TABLE LISTING
------ ----- -------


N A M E                              T Y P E  V A L U E   ATTRIBUTES

?C0001. . . . . . . . . . . . . . .  C ADDR   0008H   R   SEG=?PR?OS_CPU_SR_SAVE?TASK_SWITCH
?C0003. . . . . . . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?_OS_TESK_STACK_INIT?TASK_SWITCH
?C0005. . . . . . . . . . . . . . .  C ADDR   004EH   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0006. . . . . . . . . . . . . . .  C ADDR   0066H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0007. . . . . . . . . . . . . . .  C ADDR   0062H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0009. . . . . . . . . . . . . . .  C ADDR   0062H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0010. . . . . . . . . . . . . . .  C ADDR   0091H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
?C0011. . . . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0013. . . . . . . . . . . . . . .  C ADDR   002BH   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0016. . . . . . . . . . . . . . .  C ADDR   002FH   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
?C0018. . . . . . . . . . . . . . .  C ADDR   006BH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0019. . . . . . . . . . . . . . .  C ADDR   003FH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0020. . . . . . . . . . . . . . .  C ADDR   0057H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0021. . . . . . . . . . . . . . .  C ADDR   0053H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0023. . . . . . . . . . . . . . .  C ADDR   0053H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?C0025. . . . . . . . . . . . . . .  C ADDR   007BH   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
?DT?TIMER0_ISR?TASK_SWITCH. . . . .  D SEG    0001H       REL=UNIT
?DT?_OS_DELAY?TASK_SWITCH . . . . .  D SEG    0001H       REL=UNIT
?DT?_OS_TESK_STACK_INIT?TASK_SWITCH  D SEG    0001H       REL=UNIT
?PR?OS_CPU_SR_SAVE?TASK_SWITCH. . .  C SEG    0009H       REL=UNIT
?PR?OS_TIME_TICK?TASK_SWITCH. . . .  C SEG    0030H       REL=UNIT
?PR?TIMER0_ISR?TASK_SWITCH. . . . .  C SEG    0096H       REL=UNIT
?PR?_OS_CPU_SR_RESTORE?TASK_SWITCH.  C SEG    0004H       REL=UNIT
?PR?_OS_DELAY?TASK_SWITCH . . . . .  C SEG    0092H       REL=UNIT
?PR?_OS_TESK_STACK_INIT?TASK_SWITCH  C SEG    0025H       REL=UNIT
?TIMER0_ISR?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?TASK_SWITCH
?_OS_DELAY?BYTE . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_DELAY?TASK_SWITCH
?_OS_TESK_STACK_INIT?BYTE . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_TESK_STACK_INIT?TASK_SWITCH
AC. . . . . . . . . . . . . . . . .  B ADDR   00D0H.6 A   
ACC . . . . . . . . . . . . . . . .  D ADDR   00E0H   A   
ADCCFG. . . . . . . . . . . . . . .  D ADDR   00DEH   A   
ADC_CONTR . . . . . . . . . . . . .  D ADDR   00BCH   A   
ADC_RES . . . . . . . . . . . . . .  D ADDR   00BDH   A   
ADC_RESL. . . . . . . . . . . . . .  D ADDR   00BEH   A   
AR0 . . . . . . . . . . . . . . . .  D ADDR   0000H   A   
AR1 . . . . . . . . . . . . . . . .  D ADDR   0001H   A   
AR2 . . . . . . . . . . . . . . . .  D ADDR   0002H   A   
AR3 . . . . . . . . . . . . . . . .  D ADDR   0003H   A   
AR4 . . . . . . . . . . . . . . . .  D ADDR   0004H   A   
AR5 . . . . . . . . . . . . . . . .  D ADDR   0005H   A   
AR6 . . . . . . . . . . . . . . . .  D ADDR   0006H   A   
AR7 . . . . . . . . . . . . . . . .  D ADDR   0007H   A   
AUXINTIF. . . . . . . . . . . . . .  D ADDR   00EFH   A   
AUXR. . . . . . . . . . . . . . . .  D ADDR   008EH   A   
B . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A   
CMPCR1. . . . . . . . . . . . . . .  D ADDR   00E6H   A   
CMPCR2. . . . . . . . . . . . . . .  D ADDR   00E7H   A   
CPU_SR?547. . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?TASK_SWITCH
CY. . . . . . . . . . . . . . . . .  B ADDR   00D0H.7 A   
DPH . . . . . . . . . . . . . . . .  D ADDR   0083H   A   
DPH1. . . . . . . . . . . . . . . .  D ADDR   00E5H   A   
DPL . . . . . . . . . . . . . . . .  D ADDR   0082H   A   
DPL1. . . . . . . . . . . . . . . .  D ADDR   00E4H   A   
DPS . . . . . . . . . . . . . . . .  D ADDR   00E3H   A   
EA. . . . . . . . . . . . . . . . .  B ADDR   00A8H.7 A   
EADC. . . . . . . . . . . . . . . .  B ADDR   00A8H.5 A   
ELVD. . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A   
ES. . . . . . . . . . . . . . . . .  B ADDR   00A8H.4 A   
ET0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.1 A   
ET1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.3 A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    14

EX0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.0 A   
EX1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.2 A   
F0. . . . . . . . . . . . . . . . .  B ADDR   00D0H.5 A   
IAP_ADDRH . . . . . . . . . . . . .  D ADDR   00C3H   A   
IAP_ADDRL . . . . . . . . . . . . .  D ADDR   00C4H   A   
IAP_CMD . . . . . . . . . . . . . .  D ADDR   00C5H   A   
IAP_CONTR . . . . . . . . . . . . .  D ADDR   00C7H   A   
IAP_DATA. . . . . . . . . . . . . .  D ADDR   00C2H   A   
IAP_TPS . . . . . . . . . . . . . .  D ADDR   00F5H   A   
IAP_TRIG. . . . . . . . . . . . . .  D ADDR   00C6H   A   
IE. . . . . . . . . . . . . . . . .  D ADDR   00A8H   A   
IE0 . . . . . . . . . . . . . . . .  B ADDR   0088H.1 A   
IE1 . . . . . . . . . . . . . . . .  B ADDR   0088H.3 A   
IE2 . . . . . . . . . . . . . . . .  D ADDR   00AFH   A   
INTCLKO . . . . . . . . . . . . . .  D ADDR   008FH   A   
IP. . . . . . . . . . . . . . . . .  D ADDR   00B8H   A   
IP2 . . . . . . . . . . . . . . . .  D ADDR   00B5H   A   
IP2H. . . . . . . . . . . . . . . .  D ADDR   00B6H   A   
IP3 . . . . . . . . . . . . . . . .  D ADDR   00DFH   A   
IP3H. . . . . . . . . . . . . . . .  D ADDR   00EEH   A   
IPH . . . . . . . . . . . . . . . .  D ADDR   00B7H   A   
IRCBAND . . . . . . . . . . . . . .  D ADDR   009DH   A   
IRTRIM. . . . . . . . . . . . . . .  D ADDR   009FH   A   
IT0 . . . . . . . . . . . . . . . .  B ADDR   0088H.0 A   
IT1 . . . . . . . . . . . . . . . .  B ADDR   0088H.2 A   
LIRTRIM . . . . . . . . . . . . . .  D ADDR   009EH   A   
OS_CPU_SR_SAVE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_CPU_SR_SAVE?TASK_SWITCH
OS_INT_COUNT. . . . . . . . . . . .  D ADDR   -----       EXT
OS_INT_ENTER. . . . . . . . . . . .  C ADDR   -----       EXT
OS_INT_EXIT . . . . . . . . . . . .  C ADDR   -----       EXT
OS_MAP_TAB. . . . . . . . . . . . .  D ADDR   -----       EXT
OS_RUNNING. . . . . . . . . . . . .  B ADDR   -----       EXT
OS_TASK_RDY_TAB . . . . . . . . . .  D ADDR   -----       EXT
OS_TASK_RUNNING_ID. . . . . . . . .  D ADDR   -----       EXT
OS_TCB. . . . . . . . . . . . . . .  I ADDR   -----       EXT
OS_TIME_TICK. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OS_TIME_TICK?TASK_SWITCH
OV. . . . . . . . . . . . . . . . .  B ADDR   00D0H.2 A   
P . . . . . . . . . . . . . . . . .  B ADDR   00D0H.0 A   
P0. . . . . . . . . . . . . . . . .  D ADDR   0080H   A   
P00 . . . . . . . . . . . . . . . .  B ADDR   0080H.0 A   
P01 . . . . . . . . . . . . . . . .  B ADDR   0080H.1 A   
P02 . . . . . . . . . . . . . . . .  B ADDR   0080H.2 A   
P03 . . . . . . . . . . . . . . . .  B ADDR   0080H.3 A   
P04 . . . . . . . . . . . . . . . .  B ADDR   0080H.4 A   
P05 . . . . . . . . . . . . . . . .  B ADDR   0080H.5 A   
P06 . . . . . . . . . . . . . . . .  B ADDR   0080H.6 A   
P07 . . . . . . . . . . . . . . . .  B ADDR   0080H.7 A   
P0M0. . . . . . . . . . . . . . . .  D ADDR   0094H   A   
P0M1. . . . . . . . . . . . . . . .  D ADDR   0093H   A   
P1. . . . . . . . . . . . . . . . .  D ADDR   0090H   A   
P10 . . . . . . . . . . . . . . . .  B ADDR   0090H.0 A   
P11 . . . . . . . . . . . . . . . .  B ADDR   0090H.1 A   
P12 . . . . . . . . . . . . . . . .  B ADDR   0090H.2 A   
P13 . . . . . . . . . . . . . . . .  B ADDR   0090H.3 A   
P14 . . . . . . . . . . . . . . . .  B ADDR   0090H.4 A   
P15 . . . . . . . . . . . . . . . .  B ADDR   0090H.5 A   
P16 . . . . . . . . . . . . . . . .  B ADDR   0090H.6 A   
P17 . . . . . . . . . . . . . . . .  B ADDR   0090H.7 A   
P1M0. . . . . . . . . . . . . . . .  D ADDR   0092H   A   
P1M1. . . . . . . . . . . . . . . .  D ADDR   0091H   A   
P2. . . . . . . . . . . . . . . . .  D ADDR   00A0H   A   
P20 . . . . . . . . . . . . . . . .  B ADDR   00A0H.0 A   
P21 . . . . . . . . . . . . . . . .  B ADDR   00A0H.1 A   
P22 . . . . . . . . . . . . . . . .  B ADDR   00A0H.2 A   
P23 . . . . . . . . . . . . . . . .  B ADDR   00A0H.3 A   
P24 . . . . . . . . . . . . . . . .  B ADDR   00A0H.4 A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    15

P25 . . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A   
P26 . . . . . . . . . . . . . . . .  B ADDR   00A0H.6 A   
P27 . . . . . . . . . . . . . . . .  B ADDR   00A0H.7 A   
P2M0. . . . . . . . . . . . . . . .  D ADDR   0096H   A   
P2M1. . . . . . . . . . . . . . . .  D ADDR   0095H   A   
P3. . . . . . . . . . . . . . . . .  D ADDR   00B0H   A   
P30 . . . . . . . . . . . . . . . .  B ADDR   00B0H.0 A   
P31 . . . . . . . . . . . . . . . .  B ADDR   00B0H.1 A   
P32 . . . . . . . . . . . . . . . .  B ADDR   00B0H.2 A   
P33 . . . . . . . . . . . . . . . .  B ADDR   00B0H.3 A   
P34 . . . . . . . . . . . . . . . .  B ADDR   00B0H.4 A   
P35 . . . . . . . . . . . . . . . .  B ADDR   00B0H.5 A   
P36 . . . . . . . . . . . . . . . .  B ADDR   00B0H.6 A   
P37 . . . . . . . . . . . . . . . .  B ADDR   00B0H.7 A   
P3M0. . . . . . . . . . . . . . . .  D ADDR   00B2H   A   
P3M1. . . . . . . . . . . . . . . .  D ADDR   00B1H   A   
P4. . . . . . . . . . . . . . . . .  D ADDR   00C0H   A   
P40 . . . . . . . . . . . . . . . .  B ADDR   00C0H.0 A   
P41 . . . . . . . . . . . . . . . .  B ADDR   00C0H.1 A   
P42 . . . . . . . . . . . . . . . .  B ADDR   00C0H.2 A   
P43 . . . . . . . . . . . . . . . .  B ADDR   00C0H.3 A   
P44 . . . . . . . . . . . . . . . .  B ADDR   00C0H.4 A   
P45 . . . . . . . . . . . . . . . .  B ADDR   00C0H.5 A   
P46 . . . . . . . . . . . . . . . .  B ADDR   00C0H.6 A   
P47 . . . . . . . . . . . . . . . .  B ADDR   00C0H.7 A   
P4M0. . . . . . . . . . . . . . . .  D ADDR   00B4H   A   
P4M1. . . . . . . . . . . . . . . .  D ADDR   00B3H   A   
P5. . . . . . . . . . . . . . . . .  D ADDR   00C8H   A   
P50 . . . . . . . . . . . . . . . .  B ADDR   00C8H.0 A   
P51 . . . . . . . . . . . . . . . .  B ADDR   00C8H.1 A   
P52 . . . . . . . . . . . . . . . .  B ADDR   00C8H.2 A   
P53 . . . . . . . . . . . . . . . .  B ADDR   00C8H.3 A   
P54 . . . . . . . . . . . . . . . .  B ADDR   00C8H.4 A   
P5M0. . . . . . . . . . . . . . . .  D ADDR   00CAH   A   
P5M1. . . . . . . . . . . . . . . .  D ADDR   00C9H   A   
P6. . . . . . . . . . . . . . . . .  D ADDR   00E8H   A   
P6M0. . . . . . . . . . . . . . . .  D ADDR   00CCH   A   
P6M1. . . . . . . . . . . . . . . .  D ADDR   00CBH   A   
P7. . . . . . . . . . . . . . . . .  D ADDR   00F8H   A   
P7M0. . . . . . . . . . . . . . . .  D ADDR   00E2H   A   
P7M1. . . . . . . . . . . . . . . .  D ADDR   00E1H   A   
PADC. . . . . . . . . . . . . . . .  B ADDR   00B8H.5 A   
PCON. . . . . . . . . . . . . . . .  D ADDR   0087H   A   
PLVD. . . . . . . . . . . . . . . .  B ADDR   00B8H.6 A   
PPCA. . . . . . . . . . . . . . . .  B ADDR   00B8H.7 A   
PS. . . . . . . . . . . . . . . . .  B ADDR   00B8H.4 A   
PSW . . . . . . . . . . . . . . . .  D ADDR   00D0H   A   
PT0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.1 A   
PT1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.3 A   
PX0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.0 A   
PX1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.2 A   
P_SW1 . . . . . . . . . . . . . . .  D ADDR   00A2H   A   
P_SW2 . . . . . . . . . . . . . . .  D ADDR   00BAH   A   
RB8 . . . . . . . . . . . . . . . .  B ADDR   0098H.2 A   
REN . . . . . . . . . . . . . . . .  B ADDR   0098H.4 A   
RI. . . . . . . . . . . . . . . . .  B ADDR   0098H.0 A   
RS0 . . . . . . . . . . . . . . . .  B ADDR   00D0H.3 A   
RS1 . . . . . . . . . . . . . . . .  B ADDR   00D0H.4 A   
RSTCFG. . . . . . . . . . . . . . .  D ADDR   00FFH   A   
R_SP?242. . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_TESK_STACK_INIT?TASK_SWITCH
S2BUF . . . . . . . . . . . . . . .  D ADDR   009BH   A   
S2CON . . . . . . . . . . . . . . .  D ADDR   009AH   A   
S3BUF . . . . . . . . . . . . . . .  D ADDR   00ADH   A   
S3CON . . . . . . . . . . . . . . .  D ADDR   00ACH   A   
S4BUF . . . . . . . . . . . . . . .  D ADDR   0085H   A   
S4CON . . . . . . . . . . . . . . .  D ADDR   0084H   A   
A51 MACRO ASSEMBLER  TASK_SWITCH                                                          10/13/2020 20:10:15 PAGE    16

SADDR . . . . . . . . . . . . . . .  D ADDR   00A9H   A   
SADEN . . . . . . . . . . . . . . .  D ADDR   00B9H   A   
SBUF. . . . . . . . . . . . . . . .  D ADDR   0099H   A   
SCON. . . . . . . . . . . . . . . .  D ADDR   0098H   A   
SM0 . . . . . . . . . . . . . . . .  B ADDR   0098H.7 A   
SM1 . . . . . . . . . . . . . . . .  B ADDR   0098H.6 A   
SM2 . . . . . . . . . . . . . . . .  B ADDR   0098H.5 A   
SP. . . . . . . . . . . . . . . . .  D ADDR   0081H   A   
SPCTL . . . . . . . . . . . . . . .  D ADDR   00CEH   A   
SPDAT . . . . . . . . . . . . . . .  D ADDR   00CFH   A   
SPSTAT. . . . . . . . . . . . . . .  D ADDR   00CDH   A   
T2H . . . . . . . . . . . . . . . .  D ADDR   00D6H   A   
T2L . . . . . . . . . . . . . . . .  D ADDR   00D7H   A   
T3H . . . . . . . . . . . . . . . .  D ADDR   00D4H   A   
T3L . . . . . . . . . . . . . . . .  D ADDR   00D5H   A   
T4H . . . . . . . . . . . . . . . .  D ADDR   00D2H   A   
T4L . . . . . . . . . . . . . . . .  D ADDR   00D3H   A   
T4T3M . . . . . . . . . . . . . . .  D ADDR   00D1H   A   
TA. . . . . . . . . . . . . . . . .  D ADDR   00AEH   A   
TASK_SWITCH . . . . . . . . . . . .  N NUMB   -----       
TB8 . . . . . . . . . . . . . . . .  B ADDR   0098H.3 A   
TCON. . . . . . . . . . . . . . . .  D ADDR   0088H   A   
TF0 . . . . . . . . . . . . . . . .  B ADDR   0088H.5 A   
TF1 . . . . . . . . . . . . . . . .  B ADDR   0088H.7 A   
TH0 . . . . . . . . . . . . . . . .  D ADDR   008CH   A   
TH1 . . . . . . . . . . . . . . . .  D ADDR   008DH   A   
TI. . . . . . . . . . . . . . . . .  B ADDR   0098H.1 A   
TIMER0_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_ISR?TASK_SWITCH
TISKS?343 . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OS_DELAY?TASK_SWITCH
TL0 . . . . . . . . . . . . . . . .  D ADDR   008AH   A   
TL1 . . . . . . . . . . . . . . . .  D ADDR   008BH   A   
TMOD. . . . . . . . . . . . . . . .  D ADDR   0089H   A   
TR0 . . . . . . . . . . . . . . . .  B ADDR   0088H.4 A   
TR1 . . . . . . . . . . . . . . . .  B ADDR   0088H.6 A   
USBADR. . . . . . . . . . . . . . .  D ADDR   00FCH   A   
USBCLK. . . . . . . . . . . . . . .  D ADDR   00DCH   A   
USBCON. . . . . . . . . . . . . . .  D ADDR   00F4H   A   
USBDAT. . . . . . . . . . . . . . .  D ADDR   00ECH   A   
WDT_CONTR . . . . . . . . . . . . .  D ADDR   00C1H   A   
WKTCH . . . . . . . . . . . . . . .  D ADDR   00ABH   A   
WKTCL . . . . . . . . . . . . . . .  D ADDR   00AAH   A   
_OS_CPU_SR_RESTORE. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_CPU_SR_RESTORE?TASK_SWITCH
_OS_DELAY . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_DELAY?TASK_SWITCH
_OS_TESK_STACK_INIT . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OS_TESK_STACK_INIT?TASK_SWITCH


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
